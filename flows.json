[
    {
        "id": "dccf530a3e633ba1",
        "type": "tab",
        "label": "Flow 1",
        "disabled": false,
        "info": "",
        "env": []
    },
    {
        "id": "76c53fc4b4391e4b",
        "type": "ui_date_picker",
        "z": "dccf530a3e633ba1",
        "name": "Daily Date Picker 1",
        "label": "",
        "group": "a593b12c1e7f0916",
        "order": 1,
        "width": "7",
        "height": "1",
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 330,
        "y": 2860,
        "wires": [
            [
                "2fc1d15c78b135fc",
                "e59ee0457fd517b5",
                "93f09c430f36da6c"
            ]
        ]
    },
    {
        "id": "93f09c430f36da6c",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "getDailyDate",
        "func": "var day = new Date();\nday.setTime(msg.payload);\n//set date\nday.setDate(day.getDate());\n///day.setDate(day.getDate() + 1);\nvar prettyDate = day.toISOString().split('T')[0]\nmsg.payload = { \"day\": prettyDate }\nreturn msg;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 310,
        "y": 2920,
        "wires": [
            [
                "d271caac3323efd5",
                "cd6546ce34d50a80"
            ]
        ]
    },
    {
        "id": "d271caac3323efd5",
        "type": "mongodb in",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "getDailyHistoricals",
        "collection": "dailyHistoricals",
        "operation": "find",
        "x": 330,
        "y": 2980,
        "wires": [
            [
                "9061e4b7cce610ed"
            ]
        ]
    },
    {
        "id": "9061e4b7cce610ed",
        "type": "switch",
        "z": "dccf530a3e633ba1",
        "name": "",
        "property": "payload.length",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "jsonata"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "jsonata"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 490,
        "y": 2980,
        "wires": [
            [
                "645a3791543f5d8c"
            ],
            [
                "0a2c33189b038f90"
            ],
            [
                "86894e225a402edb",
                "d19eea41a247e1d8"
            ]
        ]
    },
    {
        "id": "0a2c33189b038f90",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterIdSingleData",
        "func": "delete msg.payload[0]._id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 3000,
        "wires": [
            [
                "ae7b8fde6cf90174"
            ]
        ]
    },
    {
        "id": "ae7b8fde6cf90174",
        "type": "ui_table",
        "z": "dccf530a3e633ba1",
        "group": "08e609891c1a1366",
        "name": "Daily Table Statistics 1",
        "order": 2,
        "width": "0",
        "height": "0",
        "columns": [
            {
                "field": "day",
                "title": "Selected Day",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "label",
                "title": "Label",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "max",
                "title": "Maximum Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "min",
                "title": "Minimum Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "avr",
                "title": "Average Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "std",
                "title": "Standard Deviation (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 0,
        "cts": false,
        "x": 980,
        "y": 3000,
        "wires": []
    },
    {
        "id": "86894e225a402edb",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterIdMultipleData",
        "func": "delete msg.payload[0]._id\ndelete msg.payload[1]._id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 710,
        "y": 3040,
        "wires": [
            [
                "ae7b8fde6cf90174",
                "5acf4ce0e2c8c287"
            ]
        ]
    },
    {
        "id": "60ed9919b83cccd5",
        "type": "ui_toast",
        "z": "dccf530a3e633ba1",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 910,
        "y": 2960,
        "wires": [
            []
        ]
    },
    {
        "id": "645a3791543f5d8c",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "No statistics were found for the selected day. Please choose another day.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 700,
        "y": 2960,
        "wires": [
            [
                "60ed9919b83cccd5"
            ]
        ]
    },
    {
        "id": "e59ee0457fd517b5",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "minimum check",
        "func": "let m = flow.get('minimumDate') || 0\nif(msg.payload < m){\n    msg.payload = m\n    return [msg,null];\n}else{\n    return [null,msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 2760,
        "wires": [
            [
                "76c53fc4b4391e4b"
            ],
            []
        ]
    },
    {
        "id": "2fc1d15c78b135fc",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "maximum check",
        "func": "let m = flow.get('maximumDate') || 120000000000000000000000000000000000000\nif(msg.payload > m){\n    msg.payload = m\n    return [msg,null];\n}else{\n    return [null,msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 320,
        "y": 2800,
        "wires": [
            [
                "76c53fc4b4391e4b"
            ],
            []
        ]
    },
    {
        "id": "1d85a0b22fa73735",
        "type": "ui_text_input",
        "z": "dccf530a3e633ba1",
        "name": "Month and Year Picker 1",
        "label": "",
        "tooltip": "",
        "group": "7eef2f7af84f78ef",
        "order": 3,
        "width": "7",
        "height": "1",
        "passthru": false,
        "mode": "month",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 1730,
        "y": 2800,
        "wires": [
            [
                "c9f175d25161c627"
            ]
        ]
    },
    {
        "id": "c9f175d25161c627",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "getMonthYear",
        "func": "var date = new Date(msg.payload);\nvar month = date.getUTCMonth() + 1;\nif (month.toString().length == 1) {\n    month = \"0\" + month;\n}\nvar year = date.getUTCFullYear();\nvar formattedMonthYear = year+\"-\"+month;\nmsg.payload = { \"month\": formattedMonthYear };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1720,
        "y": 2860,
        "wires": [
            [
                "b3c774f14fef7bed",
                "b80f07189fc4fce8"
            ]
        ]
    },
    {
        "id": "b3c774f14fef7bed",
        "type": "mongodb in",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "getMonthlyHistoricals",
        "collection": "monthlyHistoricals",
        "operation": "find",
        "x": 1720,
        "y": 2920,
        "wires": [
            [
                "a7b9d67f6303d750"
            ]
        ]
    },
    {
        "id": "d21f0b2bebfb9744",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterIdSingleData",
        "func": "delete msg.payload[0]._id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2150,
        "y": 2940,
        "wires": [
            [
                "01afd228a191dd71"
            ]
        ]
    },
    {
        "id": "01afd228a191dd71",
        "type": "ui_table",
        "z": "dccf530a3e633ba1",
        "group": "bf67b063036945e3",
        "name": "Monthly Table Statistics 1",
        "order": 2,
        "width": "0",
        "height": "0",
        "columns": [
            {
                "field": "month",
                "title": "Selected Month",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "label",
                "title": "Label",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "max",
                "title": "Maximum Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "min",
                "title": "Minimum Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "avr",
                "title": "Average Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "std",
                "title": "Standard Deviation (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 0,
        "cts": false,
        "x": 2390,
        "y": 2940,
        "wires": []
    },
    {
        "id": "b8135e41d620e21e",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterIdMultipleData",
        "func": "delete msg.payload[0]._id\ndelete msg.payload[1]._id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2150,
        "y": 2980,
        "wires": [
            [
                "01afd228a191dd71",
                "16bfad1f7a56ef12"
            ]
        ]
    },
    {
        "id": "fe9e33b45518d651",
        "type": "ui_toast",
        "z": "dccf530a3e633ba1",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 2310,
        "y": 2840,
        "wires": [
            []
        ]
    },
    {
        "id": "1154cb183decb546",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "No statistics were found for the selected month. Please choose another month.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2140,
        "y": 2840,
        "wires": [
            [
                "fe9e33b45518d651"
            ]
        ]
    },
    {
        "id": "a7b9d67f6303d750",
        "type": "switch",
        "z": "dccf530a3e633ba1",
        "name": "",
        "property": "payload.length",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "jsonata"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "jsonata"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1890,
        "y": 2920,
        "wires": [
            [
                "1154cb183decb546",
                "14acea3f172a9186"
            ],
            [
                "d21f0b2bebfb9744",
                "b63f9b3f2d1e531f"
            ],
            [
                "b8135e41d620e21e",
                "b63f9b3f2d1e531f",
                "6a35538efad9cb71"
            ]
        ]
    },
    {
        "id": "c742946d312173dc",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "x": 3130,
        "y": 2880,
        "wires": [
            [
                "9878c930828a5b24"
            ]
        ]
    },
    {
        "id": "9878c930828a5b24",
        "type": "mongodb in",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "getTotalHistorical",
        "collection": "totalHistorical",
        "operation": "find",
        "x": 3190,
        "y": 2940,
        "wires": [
            [
                "8b7e7f74d03b0c47"
            ]
        ]
    },
    {
        "id": "eefbe732e1e001bf",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterIdSingleData",
        "func": "delete msg.payload[0]._id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3450,
        "y": 3060,
        "wires": [
            [
                "9f7a50eee5b4f263"
            ]
        ]
    },
    {
        "id": "9f7a50eee5b4f263",
        "type": "ui_table",
        "z": "dccf530a3e633ba1",
        "group": "ca147ada51e70baa",
        "name": "Table",
        "order": 1,
        "width": "0",
        "height": "0",
        "columns": [
            {
                "field": "label",
                "title": "Label",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "max",
                "title": "Maximum Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "min",
                "title": "Minimum Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "avr",
                "title": "Average Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "std",
                "title": "Standard Deviation (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 0,
        "cts": false,
        "x": 3630,
        "y": 3060,
        "wires": []
    },
    {
        "id": "64f7f991551145b1",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterIdMultipleData",
        "func": "delete msg.payload[0]._id\ndelete msg.payload[1]._id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3450,
        "y": 3120,
        "wires": [
            [
                "9f7a50eee5b4f263"
            ]
        ]
    },
    {
        "id": "60ad0706b85f7bbf",
        "type": "ui_toast",
        "z": "dccf530a3e633ba1",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 3610,
        "y": 3000,
        "wires": [
            []
        ]
    },
    {
        "id": "0c7c27892d2fb8c9",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "No statistics were found for the whole dataset. Come back later.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3440,
        "y": 3000,
        "wires": [
            [
                "60ad0706b85f7bbf"
            ]
        ]
    },
    {
        "id": "8b7e7f74d03b0c47",
        "type": "switch",
        "z": "dccf530a3e633ba1",
        "name": "",
        "property": "payload.length",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "jsonata"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "jsonata"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 3190,
        "y": 3040,
        "wires": [
            [
                "0c7c27892d2fb8c9"
            ],
            [
                "eefbe732e1e001bf"
            ],
            [
                "64f7f991551145b1"
            ]
        ]
    },
    {
        "id": "b63f9b3f2d1e531f",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\": {\"show\":[\"Historical_Selected_Month_Statistics\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2140,
        "y": 3020,
        "wires": [
            [
                "6b48a3ddcc9399b3"
            ]
        ]
    },
    {
        "id": "6b48a3ddcc9399b3",
        "type": "ui_ui_control",
        "z": "dccf530a3e633ba1",
        "name": "",
        "events": "all",
        "x": 2300,
        "y": 3020,
        "wires": [
            []
        ]
    },
    {
        "id": "14acea3f172a9186",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\": {\"hide\":[\"Historical_Selected_Month_Statistics\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2140,
        "y": 2880,
        "wires": [
            [
                "11c29c0a16499a43"
            ]
        ]
    },
    {
        "id": "11c29c0a16499a43",
        "type": "ui_ui_control",
        "z": "dccf530a3e633ba1",
        "name": "",
        "events": "all",
        "x": 2300,
        "y": 2880,
        "wires": [
            []
        ]
    },
    {
        "id": "9f8f7c14ebaddc0e",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 1",
        "func": "var array = msg.payload\n\nvar hottestInside = []\nvar coldestInside = []\nvar avrMaxInside = -1000;\nvar avrMinInside = 1000;\n\nvar hottestOutside = []\nvar coldestOutside = []\nvar avrMaxOutside = -1000;\nvar avrMinOutside = 1000;\n\nfor (let index = 0; index < array.length; index++) {\n\n    if (array[index].label == \"inside\"){\n\n        if (array[index].avr > avrMaxInside) {\n            hottestInside = []\n            hottestInside.push(array[index]);\n            avrMaxInside = array[index].avr\n        } else if (array[index].avr == avrMaxInside) {\n            hottestInside.push(array[index]);\n        }\n\n        if (array[index].avr < avrMinInside) {\n            coldestInside = []\n            coldestInside.push(array[index]);\n            avrMinInside = array[index].avr\n        } else if (array[index].avr == avrMinInside) {\n            coldestInside.push(array[index]);\n        }\n\n    } else {\n\n        if (array[index].avr > avrMaxOutside) {\n            hottestOutside = []\n            hottestOutside.push(array[index]);\n            avrMaxOutside = array[index].avr\n        } else if (array[index].avr == avrMaxOutside) {\n            hottestOutside.push(array[index]);\n        }\n\n        if (array[index].avr < avrMinOutside) {\n            coldestOutside = []\n            coldestOutside.push(array[index]);\n            avrMinOutside = array[index].avr\n        } else if (array[index].avr == avrMinOutside) {\n            coldestOutside.push(array[index]);\n        }\n\n    }\n\n}\nmsg.payload = [hottestInside, coldestInside, hottestOutside, coldestOutside]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3200,
        "y": 3360,
        "wires": [
            [
                "b3cd637d9bd37510",
                "dd7e5e67dd7c05cc",
                "1efb0a803cf6754f",
                "62bcac5265abbfef"
            ]
        ]
    },
    {
        "id": "dd9b3c18e1c9e6ca",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "x": 3110,
        "y": 3200,
        "wires": [
            [
                "832caa21f4877a95"
            ]
        ]
    },
    {
        "id": "832caa21f4877a95",
        "type": "mongodb in",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "getTotalMonthlyHistoricals",
        "collection": "monthlyHistoricals",
        "operation": "find",
        "x": 3170,
        "y": 3260,
        "wires": [
            [
                "9f8f7c14ebaddc0e",
                "a71f698db4c9cadc"
            ]
        ]
    },
    {
        "id": "b3cd637d9bd37510",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3460,
        "y": 3320,
        "wires": [
            [
                "f7c1b5478525022a"
            ]
        ]
    },
    {
        "id": "dd7e5e67dd7c05cc",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[1]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3460,
        "y": 3360,
        "wires": [
            [
                "8901f3c8c90ee592"
            ]
        ]
    },
    {
        "id": "5a279a3a6c75a2a6",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "Hottest Inside Month",
        "group": "ca147ada51e70baa",
        "order": 2,
        "width": "8",
        "height": "4",
        "gtype": "gage",
        "title": "Hottest Inside Month: {{msg.topic}}",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": "30",
        "colors": [
            "#00b500",
            "#ff9500",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 3900,
        "y": 3320,
        "wires": []
    },
    {
        "id": "211646d3f7abf13e",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "Coldest Inside Month",
        "group": "ca147ada51e70baa",
        "order": 4,
        "width": "8",
        "height": "4",
        "gtype": "gage",
        "title": "Coldest Inside Month: {{msg.topic}}",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": "30",
        "colors": [
            "#00b500",
            "#00ffcc",
            "#00fffb"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 3900,
        "y": 3360,
        "wires": []
    },
    {
        "id": "1efb0a803cf6754f",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[2]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3460,
        "y": 3400,
        "wires": [
            [
                "b6da0acc6088c11a"
            ]
        ]
    },
    {
        "id": "62bcac5265abbfef",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[3]",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 3460,
        "y": 3440,
        "wires": [
            [
                "6db159e172f4907a"
            ]
        ]
    },
    {
        "id": "0ca468487df9e87c",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "Hottest Outside Month",
        "group": "ca147ada51e70baa",
        "order": 6,
        "width": "8",
        "height": "4",
        "gtype": "gage",
        "title": "Hottest Outside Month: {{msg.topic}}",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": "30",
        "colors": [
            "#00b500",
            "#ffae00",
            "#ca3838"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 3900,
        "y": 3400,
        "wires": []
    },
    {
        "id": "c20df5d861900450",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "Coldest Outside Month",
        "group": "ca147ada51e70baa",
        "order": 8,
        "width": "8",
        "height": "4",
        "gtype": "gage",
        "title": "Coldest Outside Month: {{msg.topic}}",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": "30",
        "colors": [
            "#00b500",
            "#00ff91",
            "#00fbff"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 3900,
        "y": 3440,
        "wires": []
    },
    {
        "id": "8481fe5ac4d92681",
        "type": "ui_date_picker",
        "z": "dccf530a3e633ba1",
        "name": "Daily Date Picker 2",
        "label": "",
        "group": "a593b12c1e7f0916",
        "order": 1,
        "width": "7",
        "height": "1",
        "passthru": true,
        "topic": "topic",
        "topicType": "msg",
        "className": "",
        "x": 310,
        "y": 3420,
        "wires": [
            [
                "5508055c4d168658",
                "aad44476bf25c455",
                "0786bbf5c20c5095"
            ]
        ]
    },
    {
        "id": "0786bbf5c20c5095",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "getDailyDate",
        "func": "var day = new Date();\nday.setTime(msg.payload);\nday.setDate(day.getDate());\n//day.setDate(day.getDate() + 1);\nvar prettyDate = day.toISOString().split('T')[0]\nmsg.payload = { \"day\": prettyDate }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 290,
        "y": 3480,
        "wires": [
            [
                "43e0470cf86ed4a3",
                "390b1a796dbac135"
            ]
        ]
    },
    {
        "id": "43e0470cf86ed4a3",
        "type": "mongodb in",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "getDailyHistoricals",
        "collection": "dailyHistoricals",
        "operation": "find",
        "x": 310,
        "y": 3540,
        "wires": [
            [
                "249efbfb72cf09de"
            ]
        ]
    },
    {
        "id": "249efbfb72cf09de",
        "type": "switch",
        "z": "dccf530a3e633ba1",
        "name": "",
        "property": "payload.length",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "jsonata"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "jsonata"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 470,
        "y": 3540,
        "wires": [
            [
                "58478883c904622b"
            ],
            [
                "93b58c59c1245ca3"
            ],
            [
                "b5979b8b6059fad5",
                "d19eea41a247e1d8"
            ]
        ]
    },
    {
        "id": "93b58c59c1245ca3",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterIdSingleData",
        "func": "delete msg.payload[0]._id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 3560,
        "wires": [
            [
                "2bbe1adfe8fb70a5"
            ]
        ]
    },
    {
        "id": "2bbe1adfe8fb70a5",
        "type": "ui_table",
        "z": "dccf530a3e633ba1",
        "group": "08e609891c1a1366",
        "name": "Daily Table Statistics 2",
        "order": 4,
        "width": "0",
        "height": "0",
        "columns": [
            {
                "field": "day",
                "title": "Selected Day",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "label",
                "title": "Label",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "max",
                "title": "Maximum Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "min",
                "title": "Minimum Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "avr",
                "title": "Average Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "std",
                "title": "Standard Deviation (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 0,
        "cts": false,
        "x": 940,
        "y": 3560,
        "wires": []
    },
    {
        "id": "b5979b8b6059fad5",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterIdMultipleData",
        "func": "delete msg.payload[0]._id\ndelete msg.payload[1]._id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 3600,
        "wires": [
            [
                "2bbe1adfe8fb70a5",
                "1e08801e0385c3f0"
            ]
        ]
    },
    {
        "id": "eac4692494a16d2d",
        "type": "ui_toast",
        "z": "dccf530a3e633ba1",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 910,
        "y": 3520,
        "wires": [
            []
        ]
    },
    {
        "id": "58478883c904622b",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "No statistics were found for the selected day. Please choose another day.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 680,
        "y": 3520,
        "wires": [
            [
                "eac4692494a16d2d"
            ]
        ]
    },
    {
        "id": "aad44476bf25c455",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "minimum check",
        "func": "let m = flow.get('minimumDate') || 0\nif(msg.payload < m){\n    msg.payload = m\n    return [msg,null];\n}else{\n    return [null,msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 3320,
        "wires": [
            [
                "8481fe5ac4d92681"
            ],
            []
        ]
    },
    {
        "id": "5508055c4d168658",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "maximum check",
        "func": "let m = flow.get('maximumDate') || 120000000000000000000000000000000000000\nif(msg.payload > m){\n    msg.payload = m\n    return [msg,null];\n}else{\n    return [null,msg]\n}\n",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 300,
        "y": 3360,
        "wires": [
            [
                "8481fe5ac4d92681"
            ],
            []
        ]
    },
    {
        "id": "63572fac1823cd5f",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "5bb2b4f1e0bcf54e",
        "order": 0,
        "width": "8",
        "height": "4",
        "label": "Daily Maximum Temperature Data (comparison chart)",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffcc",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#ff0000",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1200,
        "y": 3220,
        "wires": [
            []
        ]
    },
    {
        "id": "d19eea41a247e1d8",
        "type": "join",
        "z": "dccf530a3e633ba1",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 650,
        "y": 3280,
        "wires": [
            [
                "2aaa3f19570cd497",
                "8da954fad35fcd4e",
                "d301ccf124eeed9c",
                "08ecbbde3a712eed"
            ]
        ]
    },
    {
        "id": "2aaa3f19570cd497",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "maxTemperatures",
        "func": "var insideData = [msg.payload[0][0].max, msg.payload[1][0].max]\nvar outsideData = [msg.payload[0][1].max, msg.payload[1][1].max]\nvar dayOne = msg.payload[0][0].day\nvar dayTwo = msg.payload[1][0].day\nmsg.payload = [{\"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [insideData, outsideData], \"labels\": [dayOne, dayTwo] }]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 3220,
        "wires": [
            [
                "63572fac1823cd5f"
            ]
        ]
    },
    {
        "id": "35e14d64216eab41",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "5bb2b4f1e0bcf54e",
        "order": 0,
        "width": "8",
        "height": "4",
        "label": "Daily Minimum Temperature Data (comparison chart)",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffcc",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#ff0000",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1200,
        "y": 3260,
        "wires": [
            []
        ]
    },
    {
        "id": "d9a99e43935eabc0",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "5bb2b4f1e0bcf54e",
        "order": 0,
        "width": "8",
        "height": "4",
        "label": "Daily Average Temperature Data (comparison chart)",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffcc",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#ff0000",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1190,
        "y": 3300,
        "wires": [
            []
        ]
    },
    {
        "id": "9331ef7dd92cb431",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "5bb2b4f1e0bcf54e",
        "order": 0,
        "width": "8",
        "height": "4",
        "label": "Daily Standard Deviation Data (comparison chart)",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "20",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffcc",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#ff0000",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1190,
        "y": 3340,
        "wires": [
            []
        ]
    },
    {
        "id": "8da954fad35fcd4e",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "minTemperatures",
        "func": "var insideData = [msg.payload[0][0].min, msg.payload[1][0].min]\nvar outsideData = [msg.payload[0][1].min, msg.payload[1][1].min]\nvar dayOne = msg.payload[0][0].day\nvar dayTwo = msg.payload[1][0].day\nmsg.payload = [{\"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [insideData, outsideData], \"labels\": [dayOne, dayTwo] }]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 3260,
        "wires": [
            [
                "35e14d64216eab41"
            ]
        ]
    },
    {
        "id": "d301ccf124eeed9c",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "avrTemperatures",
        "func": "var insideData = [msg.payload[0][0].avr, msg.payload[1][0].avr]\nvar outsideData = [msg.payload[0][1].avr, msg.payload[1][1].avr]\nvar dayOne = msg.payload[0][0].day\nvar dayTwo = msg.payload[1][0].day\nmsg.payload = [{\"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [insideData, outsideData], \"labels\": [dayOne, dayTwo] }]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 3300,
        "wires": [
            [
                "d9a99e43935eabc0"
            ]
        ]
    },
    {
        "id": "08ecbbde3a712eed",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "stdTemperatures",
        "func": "var insideData = [msg.payload[0][0].std, msg.payload[1][0].std]\nvar outsideData = [msg.payload[0][1].std, msg.payload[1][1].std]\nvar dayOne = msg.payload[0][0].day\nvar dayTwo = msg.payload[1][0].day\nmsg.payload = [{\"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [insideData, outsideData], \"labels\": [dayOne, dayTwo] }]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 3340,
        "wires": [
            [
                "9331ef7dd92cb431"
            ]
        ]
    },
    {
        "id": "d87963a7161bcb0f",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "First Daily Graph",
        "group": "5390208bf3e2cf88",
        "order": 3,
        "width": "32",
        "height": "10",
        "label": "{{msg.label}}",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": true,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": "1",
        "removeOlderPoints": "96",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffaa",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1110,
        "y": 2880,
        "wires": [
            []
        ]
    },
    {
        "id": "cd6546ce34d50a80",
        "type": "mongodb in",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "getAllRelatedDailyHistoricals",
        "collection": "allHistoricals",
        "operation": "find",
        "x": 640,
        "y": 2880,
        "wires": [
            [
                "8760830f2a551199"
            ]
        ]
    },
    {
        "id": "8760830f2a551199",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 14",
        "func": "var dailyData = msg.payload;\n\nvar listOfInsideTemperatures = [];\nvar listOfOutsideTemperatures = [];\nvar listOfHoursMinutes = [];\n\nfor (let index = 0; index < dailyData.length; index++) {\n    const lineInfo = dailyData[index];\n    if(lineInfo.label == \"inside\"){\n        listOfInsideTemperatures.push(lineInfo.temp);\n        var onlyHourMinutes = lineInfo.hour.split(\":\")[0] + \":\" + lineInfo.hour.split(\":\")[1];\n        listOfHoursMinutes.push(onlyHourMinutes);\n    } else if (lineInfo.label == \"outside\") {\n        listOfOutsideTemperatures.push(lineInfo.temp);\n    }\n}\n\nmsg.payload = [{ \"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [listOfInsideTemperatures, listOfOutsideTemperatures], \"labels\": listOfHoursMinutes}]\nmsg.label = \"Hourly temperature variations of the day: \" + dailyData[0].day;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 2880,
        "wires": [
            [
                "d87963a7161bcb0f"
            ]
        ]
    },
    {
        "id": "3ff0dc9bc5081f41",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "Second Daily Graph",
        "group": "5390208bf3e2cf88",
        "order": 3,
        "width": "32",
        "height": "10",
        "label": "{{msg.label}}",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": true,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": "30",
        "removeOlderPoints": "96",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffaa",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1100,
        "y": 3660,
        "wires": [
            []
        ]
    },
    {
        "id": "390b1a796dbac135",
        "type": "mongodb in",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "getAllRelatedDailyHistoricals",
        "collection": "allHistoricals",
        "operation": "find",
        "x": 640,
        "y": 3660,
        "wires": [
            [
                "c92c67f6cff52344"
            ]
        ]
    },
    {
        "id": "c92c67f6cff52344",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 16",
        "func": "var dailyData = msg.payload;\n\nvar listOfInsideTemperatures = [];\nvar listOfOutsideTemperatures = [];\nvar listOfHoursMinutes = [];\n\nfor (let index = 0; index < dailyData.length; index++) {\n    const lineInfo = dailyData[index];\n    if(lineInfo.label == \"inside\"){\n        listOfInsideTemperatures.push(lineInfo.temp);\n        var onlyHourMinutes = lineInfo.hour.split(\":\")[0] + \":\" + lineInfo.hour.split(\":\")[1];\n        listOfHoursMinutes.push(onlyHourMinutes);\n    } else if (lineInfo.label == \"outside\") {\n        listOfOutsideTemperatures.push(lineInfo.temp);\n    }\n}\n\nmsg.payload = [{ \"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [listOfInsideTemperatures, listOfOutsideTemperatures], \"labels\": listOfHoursMinutes}]\nmsg.label = \"Hourly temperature variations of the day: \"+dailyData[0].day;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 890,
        "y": 3660,
        "wires": [
            [
                "3ff0dc9bc5081f41"
            ]
        ]
    },
    {
        "id": "f4bae1076c14bd98",
        "type": "ui_text_input",
        "z": "dccf530a3e633ba1",
        "name": "Month and Year Picker 2",
        "label": "",
        "tooltip": "",
        "group": "7eef2f7af84f78ef",
        "order": 3,
        "width": "7",
        "height": "1",
        "passthru": false,
        "mode": "month",
        "delay": 300,
        "topic": "topic",
        "sendOnBlur": true,
        "className": "",
        "topicType": "msg",
        "x": 1710,
        "y": 3440,
        "wires": [
            [
                "a783c514a3ea9808"
            ]
        ]
    },
    {
        "id": "a783c514a3ea9808",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "getMonthYear",
        "func": "var date = new Date(msg.payload);\nvar month = date.getUTCMonth() + 1;\nif (month.toString().length == 1) {\n    month = \"0\" + month;\n}\nvar year = date.getUTCFullYear();\nvar formattedMonthYear = year+\"-\"+month;\nmsg.payload = { \"month\": formattedMonthYear };\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 3500,
        "wires": [
            [
                "2bbce4d365716bf7",
                "c5254fb3c5ed7c45",
                "66bc692a6cf94f79"
            ]
        ]
    },
    {
        "id": "2bbce4d365716bf7",
        "type": "mongodb in",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "getMonthlyHistoricals",
        "collection": "monthlyHistoricals",
        "operation": "find",
        "x": 1700,
        "y": 3560,
        "wires": [
            [
                "e4ec44b418be4494"
            ]
        ]
    },
    {
        "id": "33563dcbef1edd32",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterIdSingleData",
        "func": "delete msg.payload[0]._id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2130,
        "y": 3580,
        "wires": [
            [
                "9fb0e23cc038a265"
            ]
        ]
    },
    {
        "id": "9fb0e23cc038a265",
        "type": "ui_table",
        "z": "dccf530a3e633ba1",
        "group": "bf67b063036945e3",
        "name": "Monthly Table Statistics 2",
        "order": 4,
        "width": "0",
        "height": "0",
        "columns": [
            {
                "field": "month",
                "title": "Selected Month",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "label",
                "title": "Label",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "max",
                "title": "Maximum Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "min",
                "title": "Minimum Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "avr",
                "title": "Average Temperature (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            },
            {
                "field": "std",
                "title": "Standard Deviation (in ºC)",
                "width": "",
                "align": "left",
                "formatter": "plaintext",
                "formatterParams": {
                    "target": "_blank"
                }
            }
        ],
        "outputs": 0,
        "cts": false,
        "x": 2370,
        "y": 3580,
        "wires": []
    },
    {
        "id": "b59db8f896e62522",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterIdMultipleData",
        "func": "delete msg.payload[0]._id\ndelete msg.payload[1]._id\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2130,
        "y": 3620,
        "wires": [
            [
                "9fb0e23cc038a265",
                "01cf3d64b473b175"
            ]
        ]
    },
    {
        "id": "adaa6bbe692fe6a5",
        "type": "ui_toast",
        "z": "dccf530a3e633ba1",
        "position": "dialog",
        "displayTime": "3",
        "highlight": "",
        "sendall": true,
        "outputs": 1,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "className": "",
        "topic": "",
        "name": "",
        "x": 2290,
        "y": 3480,
        "wires": [
            []
        ]
    },
    {
        "id": "20e226596a7b5a49",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "No statistics were found for the selected month. Please choose another month.",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2120,
        "y": 3480,
        "wires": [
            [
                "adaa6bbe692fe6a5"
            ]
        ]
    },
    {
        "id": "e4ec44b418be4494",
        "type": "switch",
        "z": "dccf530a3e633ba1",
        "name": "",
        "property": "payload.length",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "0",
                "vt": "jsonata"
            },
            {
                "t": "eq",
                "v": "1",
                "vt": "jsonata"
            },
            {
                "t": "eq",
                "v": "2",
                "vt": "jsonata"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 1870,
        "y": 3560,
        "wires": [
            [
                "20e226596a7b5a49",
                "4f79fcc5de55276a"
            ],
            [
                "33563dcbef1edd32",
                "4a80b7d2e2c8d573"
            ],
            [
                "b59db8f896e62522",
                "4a80b7d2e2c8d573",
                "6a35538efad9cb71"
            ]
        ]
    },
    {
        "id": "4a80b7d2e2c8d573",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\": {\"show\":[\"Historical_Selected_Month_Statistics\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2120,
        "y": 3660,
        "wires": [
            [
                "b917a8082bba621f"
            ]
        ]
    },
    {
        "id": "b917a8082bba621f",
        "type": "ui_ui_control",
        "z": "dccf530a3e633ba1",
        "name": "",
        "events": "all",
        "x": 2280,
        "y": 3660,
        "wires": [
            []
        ]
    },
    {
        "id": "4f79fcc5de55276a",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\": {\"hide\":[\"Historical_Selected_Month_Statistics\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2120,
        "y": 3520,
        "wires": [
            [
                "f970230e53ee321b"
            ]
        ]
    },
    {
        "id": "f970230e53ee321b",
        "type": "ui_ui_control",
        "z": "dccf530a3e633ba1",
        "name": "",
        "events": "all",
        "x": 2280,
        "y": 3520,
        "wires": [
            []
        ]
    },
    {
        "id": "d427c22680a24464",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "7cb1f3a26f39af7c",
        "order": 0,
        "width": "8",
        "height": "4",
        "label": "Monthly Maximum Temperature Data (comparison chart)",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffcc",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#ff0000",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2570,
        "y": 3180,
        "wires": [
            []
        ]
    },
    {
        "id": "6a35538efad9cb71",
        "type": "join",
        "z": "dccf530a3e633ba1",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 2010,
        "y": 3240,
        "wires": [
            [
                "a1dd64dd8708a8a0",
                "1abf21027980515e",
                "43be52493db70596",
                "6df7d052c8b6751e"
            ]
        ]
    },
    {
        "id": "a1dd64dd8708a8a0",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "maxTemperatures",
        "func": "var insideData = [msg.payload[0][0].max, msg.payload[1][0].max]\nvar outsideData = [msg.payload[0][1].max, msg.payload[1][1].max]\nvar monthOne = msg.payload[0][0].month\nvar monthTwo = msg.payload[1][0].month\nmsg.payload = [{ \"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [insideData, outsideData], \"labels\": [monthOne, monthTwo] }]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2230,
        "y": 3180,
        "wires": [
            [
                "d427c22680a24464"
            ]
        ]
    },
    {
        "id": "832db19ed820a2e8",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "7cb1f3a26f39af7c",
        "order": 0,
        "width": "8",
        "height": "4",
        "label": "Monthly Minimum Temperature Data (comparison chart)",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffcc",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#ff0000",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2570,
        "y": 3220,
        "wires": [
            []
        ]
    },
    {
        "id": "ea8d003df2fd9f69",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "7cb1f3a26f39af7c",
        "order": 0,
        "width": "8",
        "height": "4",
        "label": "Monthly Average Temperature Data (comparison chart)",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffcc",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#ff0000",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2560,
        "y": 3260,
        "wires": [
            []
        ]
    },
    {
        "id": "61cb15cb786005f0",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "7cb1f3a26f39af7c",
        "order": 0,
        "width": "8",
        "height": "4",
        "label": "Monthly Standard Deviation Data (comparison chart)",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "20",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffcc",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#ff0000",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2560,
        "y": 3300,
        "wires": [
            []
        ]
    },
    {
        "id": "1abf21027980515e",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "minTemperatures",
        "func": "var insideData = [msg.payload[0][0].min, msg.payload[1][0].min]\nvar outsideData = [msg.payload[0][1].min, msg.payload[1][1].min]\nvar monthOne = msg.payload[0][0].month\nvar monthTwo = msg.payload[1][0].month\nmsg.payload = [{ \"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [insideData, outsideData], \"labels\": [monthOne, monthTwo] }]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2230,
        "y": 3220,
        "wires": [
            [
                "832db19ed820a2e8"
            ]
        ]
    },
    {
        "id": "43be52493db70596",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "avrTemperatures",
        "func": "var insideData = [msg.payload[0][0].avr, msg.payload[1][0].avr]\nvar outsideData = [msg.payload[0][1].avr, msg.payload[1][1].avr]\nvar monthOne = msg.payload[0][0].month\nvar monthTwo = msg.payload[1][0].month\nmsg.payload = [{ \"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [insideData, outsideData], \"labels\": [monthOne, monthTwo] }]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2230,
        "y": 3260,
        "wires": [
            [
                "ea8d003df2fd9f69"
            ]
        ]
    },
    {
        "id": "6df7d052c8b6751e",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "stdTemperatures",
        "func": "var insideData = [msg.payload[0][0].std, msg.payload[1][0].std]\nvar outsideData = [msg.payload[0][1].std, msg.payload[1][1].std]\nvar monthOne = msg.payload[0][0].month\nvar monthTwo = msg.payload[1][0].month\nmsg.payload = [{ \"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [insideData, outsideData], \"labels\": [monthOne, monthTwo] }]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2230,
        "y": 3300,
        "wires": [
            [
                "61cb15cb786005f0"
            ]
        ]
    },
    {
        "id": "ba464d46992a8a16",
        "type": "ui_text",
        "z": "dccf530a3e633ba1",
        "group": "bf67b063036945e3",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Selected Month 1: ",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 2570,
        "y": 2980,
        "wires": []
    },
    {
        "id": "16bfad1f7a56ef12",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].month",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2360,
        "y": 2980,
        "wires": [
            [
                "ba464d46992a8a16"
            ]
        ]
    },
    {
        "id": "387e7629869d99d5",
        "type": "ui_text",
        "z": "dccf530a3e633ba1",
        "group": "bf67b063036945e3",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Selected Month 2: ",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 2550,
        "y": 3620,
        "wires": []
    },
    {
        "id": "01cf3d64b473b175",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].month",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 2340,
        "y": 3620,
        "wires": [
            [
                "387e7629869d99d5"
            ]
        ]
    },
    {
        "id": "9230f1e947a24dd0",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "Second Monthly Graph",
        "group": "4372ebcc482c975e",
        "order": 2,
        "width": "32",
        "height": "10",
        "label": "{{msg.label}}",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": true,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": "30",
        "removeOlderPoints": "96",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffaa",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2620,
        "y": 3720,
        "wires": [
            []
        ]
    },
    {
        "id": "c5254fb3c5ed7c45",
        "type": "mongodb in",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "getAllRelatedMonthlyHistoricals",
        "collection": "dailyHistoricals",
        "operation": "find",
        "x": 2170,
        "y": 3720,
        "wires": [
            [
                "6dc07eb6c7daee6a"
            ]
        ]
    },
    {
        "id": "6dc07eb6c7daee6a",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 17",
        "func": "var dailyData = msg.payload;\n\nvar listOfInsideTemperatures = [];\nvar listOfOutsideTemperatures = [];\nvar listOfDays = [];\n\nfor (let index = 0; index < dailyData.length; index++) {\n    const lineInfo = dailyData[index];\n    if (lineInfo.label == \"inside\") {\n        listOfInsideTemperatures.push(lineInfo.avr);\n        var day = lineInfo.day.split(\"-\")[2];\n        listOfDays.push(day);\n    } else if (lineInfo.label == \"outside\") {\n        listOfOutsideTemperatures.push(lineInfo.avr);\n    }\n}\n\nmsg.payload = [{ \"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [listOfInsideTemperatures, listOfOutsideTemperatures], \"labels\": listOfDays }]\nmsg.label = \"Daily temperature variations (by daily average) of the month: \" + dailyData[0].day.split(\"-\")[0] + \"-\" + dailyData[0].day.split(\"-\")[1];\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2410,
        "y": 3720,
        "wires": [
            [
                "9230f1e947a24dd0"
            ]
        ]
    },
    {
        "id": "66bc692a6cf94f79",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 18",
        "func": "var regexToken = new RegExp(msg.payload.month, \"i\");\nmsg.payload = { day: { $regex: regexToken} }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1890,
        "y": 3720,
        "wires": [
            [
                "c5254fb3c5ed7c45"
            ]
        ]
    },
    {
        "id": "c64099f311ece742",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "First Monthly Graph",
        "group": "4372ebcc482c975e",
        "order": 1,
        "width": "32",
        "height": "10",
        "label": "{{msg.label}}",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": true,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": "30",
        "removeOlderPoints": "96",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffaa",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 2690,
        "y": 2720,
        "wires": [
            []
        ]
    },
    {
        "id": "fae7e8d72e122b3c",
        "type": "mongodb in",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "getAllRelatedMonthlyHistoricals",
        "collection": "dailyHistoricals",
        "operation": "find",
        "x": 2250,
        "y": 2720,
        "wires": [
            [
                "0578eb17bde74ae3"
            ]
        ]
    },
    {
        "id": "0578eb17bde74ae3",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 19",
        "func": "var dailyData = msg.payload;\n\nvar listOfInsideTemperatures = [];\nvar listOfOutsideTemperatures = [];\nvar listOfDays = [];\n\nfor (let index = 0; index < dailyData.length; index++) {\n    const lineInfo = dailyData[index];\n    if(lineInfo.label == \"inside\"){\n        listOfInsideTemperatures.push(lineInfo.avr);\n        var day = lineInfo.day.split(\"-\")[2];\n        listOfDays.push(day);\n    } else if (lineInfo.label == \"outside\") {\n        listOfOutsideTemperatures.push(lineInfo.avr);\n    }\n}\n\nmsg.payload = [{ \"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [listOfInsideTemperatures, listOfOutsideTemperatures], \"labels\": listOfDays}]\nmsg.label = \"Daily temperature variations (by daily average) of the month: \" + dailyData[0].day.split(\"-\")[0] + \"-\" + dailyData[0].day.split(\"-\")[1];\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2490,
        "y": 2720,
        "wires": [
            [
                "c64099f311ece742"
            ]
        ]
    },
    {
        "id": "b80f07189fc4fce8",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 20",
        "func": "var regexToken = new RegExp(msg.payload.month, \"i\");\nmsg.payload = { day: { $regex: regexToken} }\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1970,
        "y": 2720,
        "wires": [
            [
                "fae7e8d72e122b3c"
            ]
        ]
    },
    {
        "id": "c4de6242169ed0bf",
        "type": "ui_text",
        "z": "dccf530a3e633ba1",
        "group": "08e609891c1a1366",
        "order": 1,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Selected Day 1: ",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 1160,
        "y": 3040,
        "wires": []
    },
    {
        "id": "5acf4ce0e2c8c287",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].day",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 960,
        "y": 3040,
        "wires": [
            [
                "c4de6242169ed0bf"
            ]
        ]
    },
    {
        "id": "071cf7db26696113",
        "type": "ui_text",
        "z": "dccf530a3e633ba1",
        "group": "08e609891c1a1366",
        "order": 3,
        "width": 0,
        "height": 0,
        "name": "",
        "label": "Selected Day 2: ",
        "format": "{{msg.payload}}",
        "layout": "row-left",
        "className": "",
        "x": 1120,
        "y": 3600,
        "wires": []
    },
    {
        "id": "1e08801e0385c3f0",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "payload[0].day",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 920,
        "y": 3600,
        "wires": [
            [
                "071cf7db26696113"
            ]
        ]
    },
    {
        "id": "bb6109d8fc9715be",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "ERRO ESTRANHO DE \"property day not found\"",
        "info": "",
        "x": 2520,
        "y": 3780,
        "wires": []
    },
    {
        "id": "f7c1b5478525022a",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 21",
        "func": "var myTopic = msg.payload;\nmsg.payload = msg.payload[0].avr;\nif (myTopic.length <= 1) {\n    msg.topic = myTopic[0].month;\n    return msg;\n} else {\n    var topic = \"\";\n    for (let index = 0; index < myTopic.length; index++) {\n        topic = topic + \",\" + myTopic[index].avr;\n    }\n    msg.topic = topic;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3670,
        "y": 3320,
        "wires": [
            [
                "5a279a3a6c75a2a6"
            ]
        ]
    },
    {
        "id": "8901f3c8c90ee592",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 22",
        "func": "var myTopic = msg.payload;\nmsg.payload = msg.payload[0].avr;\nif (myTopic.length <= 1) {\n    msg.topic = myTopic[0].month;\n    return msg;\n} else {\n    var topic = \"\";\n    for (let index = 0; index < myTopic.length; index++) {\n        topic = topic + \",\" + myTopic[index].avr;\n    }\n    msg.topic = topic;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3670,
        "y": 3360,
        "wires": [
            [
                "211646d3f7abf13e"
            ]
        ]
    },
    {
        "id": "b6da0acc6088c11a",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 23",
        "func": "var myTopic = msg.payload;\nmsg.payload = msg.payload[0].avr;\nif (myTopic.length <= 1) {\n    msg.topic = myTopic[0].month;\n    return msg;\n} else {\n    var topic = \"\";\n    for (let index = 0; index < myTopic.length; index++) {\n        topic = topic + \",\" + myTopic[index].avr;\n    }\n    msg.topic = topic;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3670,
        "y": 3400,
        "wires": [
            [
                "0ca468487df9e87c"
            ]
        ]
    },
    {
        "id": "6db159e172f4907a",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 24",
        "func": "var myTopic = msg.payload;\nmsg.payload = msg.payload[0].avr;\nif (myTopic.length <= 1) {\n    msg.topic = myTopic[0].month;\n    return msg;\n} else {\n    var topic = \"\";\n    for (let index = 0; index < myTopic.length; index++) {\n        topic = topic + \",\" + myTopic[index].avr;\n    }\n    msg.topic = topic;\n    return msg;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3670,
        "y": 3440,
        "wires": [
            [
                "c20df5d861900450"
            ]
        ]
    },
    {
        "id": "37328460418e8aa7",
        "type": "mqtt in",
        "z": "dccf530a3e633ba1",
        "name": "",
        "topic": "iotgroup6/temperature",
        "qos": "2",
        "datatype": "auto-detect",
        "broker": "273be3987efa31af",
        "nl": false,
        "rap": true,
        "rh": 0,
        "inputs": 0,
        "x": 200,
        "y": 1640,
        "wires": [
            [
                "d5cb56e251ea7217",
                "3608b957646c6d4f",
                "6a158a436bca8c4c",
                "70765a6573b8bf8c",
                "4fa66e0d338fce23"
            ]
        ]
    },
    {
        "id": "071b1ceab94c5d7f",
        "type": "create dataset",
        "z": "dccf530a3e633ba1",
        "name": "createOutsideDataset",
        "path": "outside.data",
        "saveFolder": "datasets",
        "saveName": "outside",
        "input": "0,1,2,3,4",
        "output": "5",
        "trainingPartition": "",
        "shuffle": false,
        "seed": "",
        "x": 2320,
        "y": 240,
        "wires": [
            [
                "c63a4d59c8059c56"
            ]
        ]
    },
    {
        "id": "f7d978a73a0cb098",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2060,
        "y": 240,
        "wires": [
            [
                "071b1ceab94c5d7f"
            ]
        ]
    },
    {
        "id": "5396bb8ed68da4a1",
        "type": "multi layer perceptron classifier",
        "z": "dccf530a3e633ba1",
        "name": "",
        "savePath": "models",
        "saveName": "outside.c",
        "layers": "200, 100, 200",
        "activation": "relu",
        "solver": "adam",
        "learningRate": "0.005",
        "maxIter": "2000",
        "batchSize": "",
        "x": 2870,
        "y": 300,
        "wires": [
            [
                "23d0ebe3921c63c5"
            ],
            [
                "e3bdab3d6a2ed673"
            ]
        ]
    },
    {
        "id": "cc839b3b6076f865",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "loadTrainDataset",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar totalEntriesUpdated = [];\n\nfor (let index = 0; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n\n    if (lineSplit.length == 6) {\n\n        var hour = parseInt(lineSplit[0]);\n        var minute = parseInt(lineSplit[1]);\n        var day = parseInt(lineSplit[2]);\n        var month = parseInt(lineSplit[3]);\n        var year = parseInt(lineSplit[4]);\n        var temperature = parseInt(lineSplit[5]);\n\n        var curArray = [hour, minute, day, month, year, temperature];\n        totalEntriesUpdated.push(curArray);\n\n    }\n    \n}\n\nmsg.payload = totalEntriesUpdated;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2570,
        "y": 300,
        "wires": [
            [
                "5396bb8ed68da4a1"
            ]
        ]
    },
    {
        "id": "1d0e813b6813062c",
        "type": "file in",
        "z": "dccf530a3e633ba1",
        "name": "",
        "filename": "datasets/outside/train.csv",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2290,
        "y": 300,
        "wires": [
            [
                "cc839b3b6076f865"
            ]
        ]
    },
    {
        "id": "6c1520356d7309a0",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2060,
        "y": 300,
        "wires": [
            [
                "1d0e813b6813062c"
            ]
        ]
    },
    {
        "id": "d5cb56e251ea7217",
        "type": "join",
        "z": "dccf530a3e633ba1",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 610,
        "y": 1640,
        "wires": [
            [
                "c2092789a66d4e11",
                "71184e40e04bf9f8",
                "a9228696960146c8",
                "b3a94e7cdec4d146",
                "d312fc2bf423f427"
            ]
        ]
    },
    {
        "id": "f71ea3b849675ad2",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "Hourly variations of received data",
        "group": "9f7d723fbcbca6b1",
        "order": 1,
        "width": 0,
        "height": 0,
        "label": "{{msg.label}}",
        "chartType": "line",
        "legend": "true",
        "xformat": "HH:mm",
        "interpolate": "linear",
        "nodata": "",
        "dot": true,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": 1,
        "removeOlderPoints": "100",
        "removeOlderUnit": "86400",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#1f77b4",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 560,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "3608b957646c6d4f",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "sendDataToGraph",
        "func": "\n//verificar para mudanca de dias, mes e ano\nvar array = flow.get(\"onlineData\");\nvar receivedData = msg.payload;\nif(array.length == 96){\n    array = [];\n}\narray.push(receivedData);\nflow.set(\"onlineData\", array);\n\nvar listOfInsideTemperatures = [];\nvar listOfOutsideTemperatures = [];\nvar listOfHoursMinutes = [];\nvar boolean = true;\n\n\nfor (let index = 0; index < array.length; index++) {\n    const lineInfo = array[index];\n    \n    if(boolean){\n        var hourMinuteSeconds = lineInfo.date.split(\" \")[1];\n        var onlyHourMinutes = hourMinuteSeconds.split(\":\")[0] + \":\" + hourMinuteSeconds.split(\":\")[1];\n        listOfHoursMinutes.push(onlyHourMinutes);\n        boolean = false;\n    } else {\n        boolean = true;\n    }\n\n    if (lineInfo.label == \"inside\") {\n        listOfInsideTemperatures.push(lineInfo.temperature);\n    } else if (lineInfo.label == \"outside\") {\n        listOfOutsideTemperatures.push(lineInfo.temperature);\n    }\n}\n\nmsg.payload = [{ \"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [listOfInsideTemperatures, listOfOutsideTemperatures], \"labels\": listOfHoursMinutes }]\nmsg.label = \"Hourly temperature variations of the day: \" + array[0].date.split(\" \")[0];\n\nreturn msg;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 210,
        "y": 1540,
        "wires": [
            [
                "f71ea3b849675ad2"
            ]
        ]
    },
    {
        "id": "dcc303576d5749e6",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "defineOnlineInsideDataBuffer",
        "func": "var array = []\nflow.set(\"onlineInsideData\", array);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "4eb9ed2d8a10c4ad",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "[]",
        "payloadType": "json",
        "x": 170,
        "y": 1440,
        "wires": [
            [
                "f71ea3b849675ad2",
                "dcc303576d5749e6",
                "194a46cfe7c222e2",
                "3b81f5484a421839",
                "88db5412e31c97da",
                "b000f91843300eaf",
                "bed149260affa08f",
                "6293a08dc2eac03f"
            ]
        ]
    },
    {
        "id": "fc624654ddb7813e",
        "type": "file in",
        "z": "dccf530a3e633ba1",
        "name": "",
        "filename": "datasets/outside/test.csv",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2290,
        "y": 360,
        "wires": [
            [
                "9c325980d51ca0d6",
                "66521054ed911491"
            ]
        ]
    },
    {
        "id": "f2e6bcabf797e2c4",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2060,
        "y": 360,
        "wires": [
            [
                "fc624654ddb7813e"
            ]
        ]
    },
    {
        "id": "7872d079bab55ad2",
        "type": "predictor",
        "z": "dccf530a3e633ba1",
        "name": "outside predictor",
        "modelPath": "models",
        "modelName": "outside.c",
        "x": 2890,
        "y": 400,
        "wires": [
            [
                "8706a1900d5dba43"
            ],
            []
        ]
    },
    {
        "id": "8706a1900d5dba43",
        "type": "assessment",
        "z": "dccf530a3e633ba1",
        "name": "",
        "score": "accuracy_score",
        "x": 2890,
        "y": 360,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "9c325980d51ca0d6",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "loadInputTestOutsideDataset",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar totalEntriesUpdated = [];\n\nfor (let index = 0; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n    if (lineSplit.length == 6) {\n        var temperature = parseInt(lineSplit[5]);\n        var curArray = temperature;\n        totalEntriesUpdated.push(curArray);\n    }\n}\n\nmsg.payload = totalEntriesUpdated;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2600,
        "y": 360,
        "wires": [
            [
                "8706a1900d5dba43"
            ]
        ]
    },
    {
        "id": "66521054ed911491",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "loadOutputTestOutsideDataset",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar totalEntriesUpdated = [];\n\nfor (let index = 0; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n\n    if (lineSplit.length == 6) {\n\n        var hour = parseInt(lineSplit[0]);\n        var minute = parseInt(lineSplit[1]);\n        var day = parseInt(lineSplit[2]);\n        var month = parseInt(lineSplit[3]);\n        var year = parseInt(lineSplit[4]);\n\n        var curArray = [hour, minute, day, month, year];\n        totalEntriesUpdated.push(curArray);\n\n    }\n    \n}\n\nmsg.payload = totalEntriesUpdated;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2610,
        "y": 400,
        "wires": [
            [
                "7872d079bab55ad2"
            ]
        ]
    },
    {
        "id": "a72b704a14f4b972",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Insert entries from historical.data to MongoDB",
        "info": "",
        "x": 570,
        "y": 40,
        "wires": []
    },
    {
        "id": "2a6a6c9d76267a07",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "dailyHistoricals",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1070,
        "y": 120,
        "wires": []
    },
    {
        "id": "6ac33524a940816e",
        "type": "ui_button",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "187fd0431166b767",
        "order": 2,
        "width": "10",
        "height": "1",
        "passthru": false,
        "label": "Monthly",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{background}}",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 460,
        "y": 600,
        "wires": [
            [
                "1d0592bea5c4409d"
            ]
        ]
    },
    {
        "id": "7072c616b92d1794",
        "type": "ui_button",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "187fd0431166b767",
        "order": 3,
        "width": "11",
        "height": "1",
        "passthru": false,
        "label": "Total",
        "tooltip": "",
        "color": "",
        "bgcolor": "{{background}}",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "",
        "topicType": "str",
        "x": 450,
        "y": 640,
        "wires": [
            [
                "ba804f825e6655bf"
            ]
        ]
    },
    {
        "id": "7e46c8e1d866986b",
        "type": "ui_button",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "187fd0431166b767",
        "order": 1,
        "width": "11",
        "height": "1",
        "passthru": false,
        "label": "Daily",
        "tooltip": "{{label}}",
        "color": "",
        "bgcolor": "{{background}}",
        "className": "",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "background",
        "topicType": "msg",
        "x": 450,
        "y": 560,
        "wires": [
            [
                "143357d9a0b45505"
            ]
        ]
    },
    {
        "id": "0b83dfd5ee17af79",
        "type": "ui_ui_control",
        "z": "dccf530a3e633ba1",
        "name": "",
        "events": "all",
        "x": 860,
        "y": 600,
        "wires": [
            []
        ]
    },
    {
        "id": "5f60c68f901d5fc1",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "RemoveAll",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "x": 400,
        "y": 340,
        "wires": [
            [
                "9460f87edb4a5993"
            ]
        ]
    },
    {
        "id": "9460f87edb4a5993",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "dailyHistoricals",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 770,
        "y": 340,
        "wires": []
    },
    {
        "id": "52df9e6c22feaad9",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "RemoveAll",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "x": 400,
        "y": 380,
        "wires": [
            [
                "ca17c214f63f63fb"
            ]
        ]
    },
    {
        "id": "ca17c214f63f63fb",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "monthlyHistoricals",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 780,
        "y": 380,
        "wires": []
    },
    {
        "id": "965a86f45afcaaa7",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "RemoveAll",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "x": 400,
        "y": 420,
        "wires": [
            [
                "a06986d410f38731"
            ]
        ]
    },
    {
        "id": "a06986d410f38731",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "totalHistorical",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 760,
        "y": 420,
        "wires": []
    },
    {
        "id": "143357d9a0b45505",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\": {\"show\":[\"Historical_Select_Days\",\"Historical_Selected_Days_Statistics\",\"Historical_Daily_Temperature_Charts\", \"Historical_Daily_Temperature_Variation_Graphs\"], \"hide\":[\"Historical_Select_Months\",\"Historical_Selected_Months_Statistics\",\"Historical_Monthly_Temperature_Charts\",\"Historical_Monthly_Temperature_Variation_Graphs\",\"Historical_Total_Month_Graph\",\"Historical_Show_Total_Statistics\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 560,
        "wires": [
            [
                "0b83dfd5ee17af79"
            ]
        ]
    },
    {
        "id": "1d0592bea5c4409d",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\": {\"show\":[\"Historical_Select_Months\",\"Historical_Selected_Months_Statistics\",\"Historical_Monthly_Temperature_Charts\",\"Historical_Monthly_Temperature_Variation_Graphs\"], \"hide\":[\"Historical_Select_Days\",\"Historical_Selected_Days_Statistics\",\"Historical_Daily_Temperature_Charts\", \"Historical_Daily_Temperature_Variation_Graphs\",\"Historical_Total_Month_Graph\",\"Historical_Show_Total_Statistics\"]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 600,
        "wires": [
            [
                "0b83dfd5ee17af79"
            ]
        ]
    },
    {
        "id": "ba804f825e6655bf",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "{\"group\": {\"show\":[\"Historical_Total_Month_Graph\",\"Historical_Show_Total_Statistics\"], \"hide\":[  \"Historical_Select_Days\",\"Historical_Selected_Days_Statistics\",\"Historical_Daily_Temperature_Charts\", \"Historical_Daily_Temperature_Variation_Graphs\",\"Historical_Select_Months\",\"Historical_Selected_Months_Statistics\",\"Historical_Monthly_Temperature_Charts\",\"Historical_Monthly_Temperature_Variation_Graphs\"     ]}}",
                "tot": "json"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 640,
        "y": 640,
        "wires": [
            [
                "0b83dfd5ee17af79"
            ]
        ]
    },
    {
        "id": "e1e001cce52d86aa",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "monthlyHistoricals",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1080,
        "y": 160,
        "wires": []
    },
    {
        "id": "60804d31df17b5d6",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "totalHistorical",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1060,
        "y": 200,
        "wires": []
    },
    {
        "id": "d6a08aac592dc20a",
        "type": "ui_ui_control",
        "z": "dccf530a3e633ba1",
        "name": "",
        "events": "all",
        "x": 680,
        "y": 520,
        "wires": [
            []
        ]
    },
    {
        "id": "e94eb30e83ed850f",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "resetAll",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "{\"group\": {\"hide\":[\"Historical_Select_Days\",\"Historical_Selected_Days_Statistics\",\"Historical_Daily_Temperature_Charts\", \"Historical_Daily_Temperature_Variation_Graphs\",\"Historical_Select_Months\",\"Historical_Selected_Months_Statistics\",\"Historical_Monthly_Temperature_Charts\",\"Historical_Monthly_Temperature_Variation_Graphs\",\"Historical_Total_Month_Graph\",\"Historical_Show_Total_Statistics\"]}}",
        "payloadType": "json",
        "x": 480,
        "y": 520,
        "wires": [
            [
                "d6a08aac592dc20a"
            ]
        ]
    },
    {
        "id": "37059adedb2897bd",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Remove entries from MongoDB (only use if really needed)",
        "info": "",
        "x": 570,
        "y": 260,
        "wires": []
    },
    {
        "id": "9bda71f31fe7b5e5",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Start dashboard (hide/show segments to display information correctly)",
        "info": "",
        "x": 610,
        "y": 480,
        "wires": []
    },
    {
        "id": "e107c6a8bfd0c68c",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "addTotalHistoricalToDB",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar totalListInside = [];\nvar maxInside = -1000;\nvar minInside = 1000;\nvar listTemperaturesInside = [];\n\nvar totalListOutside = [];\nvar maxOutside = -1000;\nvar minOutside = 1000;\nvar listTemperaturesOutside = [];\n\n\nfunction getStandardDeviation(array) {\n    const n = array.length\n    const mean = array.reduce((a, b) => a + b) / n\n    return Math.sqrt(array.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b) / n)\n}\n\nfunction getAverage(array) {\n    const n = array.length\n    return array.reduce((a, b) => a + b) / n\n}\n\n\nfor (let index = 1; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n\n    if (lineSplit.length == 3) {\n\n        if (lineSplit[0] != \"\" && lineSplit[1] != \"\" && lineSplit[2] != \"\") {\n\n            var temperature = parseFloat(parseFloat(lineSplit[1]).toFixed(3));\n            var label = lineSplit[2];\n\n            if (label == \"inside\") {\n\n                listTemperaturesInside.push(temperature);\n\n            } else {\n\n                listTemperaturesOutside.push(temperature);\n\n            }\n        }\n    }\n}\n\n//add total statistics\n\nvar stdInside = parseFloat(getStandardDeviation(listTemperaturesInside).toFixed(3));\nvar avrInside = parseFloat(getAverage(listTemperaturesInside).toFixed(3));\nmaxInside = Math.max(Math.max(...listTemperaturesInside), maxInside);\nminInside = Math.min(Math.min(...listTemperaturesInside), minInside);\ntotalListInside.push({ label: \"inside\", max: maxInside, min: minInside, avr: avrInside, std: stdInside });\n\nvar stdOutside = parseFloat(getStandardDeviation(listTemperaturesOutside).toFixed(3));\nvar avrOutside = parseFloat(getAverage(listTemperaturesOutside).toFixed(3));\nmaxOutside = Math.max(Math.max(...listTemperaturesOutside), maxOutside);\nminOutside = Math.min(Math.min(...listTemperaturesOutside), minOutside);\ntotalListOutside.push({ label: \"outside\", max: maxOutside, min: minOutside, avr: avrOutside, std: stdOutside });\n\nmsg.payload = totalListInside.concat(totalListOutside);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 200,
        "wires": [
            [
                "60804d31df17b5d6"
            ]
        ]
    },
    {
        "id": "d8165e9bd962aa43",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "addAllHistoricalToDB",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar totalListInside = [];\nvar totalListOutside = [];\n\nfor (let index = 1; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n\n    if (lineSplit.length == 3) {\n\n        var date = lineSplit[0].split(\" \");\n\n        if (date.length == 2 && lineSplit[0] != \"\" && lineSplit[1] != \"\" && lineSplit[2] != \"\") {\n\n            var temperature = parseFloat(parseFloat(lineSplit[1]).toFixed(3));\n            var label = lineSplit[2];\n            var prettyDate = date[0];\n            var prettyHour = date[1];\n\n            if (label == \"inside\") {\n\n                totalListInside.push({ day: prettyDate, hour: prettyHour, label: \"inside\", temp: temperature });\n\n            } else if (label == \"outside\") {\n\n                totalListOutside.push({ day: prettyDate, hour: prettyHour, label: \"outside\", temp: temperature });\n            }\n        }\n    }\n}\n\n//msg.payload = msg.payload.split(\"\\n\");\nmsg.payload = totalListInside.concat(totalListOutside);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 720,
        "y": 80,
        "wires": [
            [
                "fb0186a940f674fc"
            ]
        ]
    },
    {
        "id": "fb0186a940f674fc",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "allHistoricals",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 1060,
        "y": 80,
        "wires": []
    },
    {
        "id": "e9633f101c13d24d",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "addDailyHistoricalToDB",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar dailyListInside = [];\nvar maxInside = -1000;\nvar minInside = 1000;\nvar listTemperaturesInside = [];\n\nvar dailyListOutside = [];\nvar maxOutside = -1000;\nvar minOutside = 1000;\nvar listTemperaturesOutside = [];\n\nfunction getStandardDeviation(array) {\n    const n = array.length\n    const mean = array.reduce((a, b) => a + b) / n\n    return Math.sqrt(array.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b) / n)\n}\n\nfunction getAverage(array) {\n    const n = array.length\n    return array.reduce((a, b) => a + b) / n\n}\n\nvar dayInsideCounter = 0;\nvar dayOutsideCounter = 0;\n\nvar lastRecordedDay = new Date(allLines[1].split(\",\")[0].split(\" \")[0]);\nvar lastRecordedInsideDay = new Date(allLines[1].split(\",\")[0].split(\" \")[0]);\nvar lastRecordedOutsideDay = lastRecordedInsideDay;\n\nfor (let index = 1; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n\n    if (lineSplit.length == 3) {\n\n        var date = lineSplit[0].split(\" \");\n\n        if (date.length == 2 && lineSplit[0] != \"\" && lineSplit[1] != \"\" && lineSplit[2] != \"\") {\n\n            var temperature = parseFloat(parseFloat(lineSplit[1]).toFixed(3));\n            var label = lineSplit[2];\n\n            if (label == \"inside\") {\n\n                if (lastRecordedInsideDay.getTime() != new Date(date[0]).getTime()) {\n\n                    var stdInside = parseFloat(getStandardDeviation(listTemperaturesInside).toFixed(3));\n                    var avrInside = parseFloat(getAverage(listTemperaturesInside).toFixed(3));\n\n                    maxInside = Math.max(Math.max(...listTemperaturesInside), maxInside);\n                    minInside = Math.min(Math.min(...listTemperaturesInside), minInside);\n\n                    var prettyDate = lastRecordedInsideDay.toISOString().split('T')[0]\n                    dailyListInside.push({ day: prettyDate, label: \"inside\", max: maxInside, min: minInside, avr: avrInside, std: stdInside });\n\n                    listTemperaturesInside = []\n\n                    maxInside = -1000;\n                    minInside = 1000;\n\n                    lastRecordedInsideDay = new Date(date[0]);\n\n                }\n\n                listTemperaturesInside.push(temperature);\n\n            } else {\n\n                if (lastRecordedOutsideDay.getTime() != new Date(date[0]).getTime()) {\n\n                    var stdOutside = parseFloat(getStandardDeviation(listTemperaturesOutside).toFixed(3));\n                    var avrOutside = parseFloat(getAverage(listTemperaturesOutside).toFixed(3));\n\n                    maxOutside = Math.max(Math.max(...listTemperaturesOutside), maxOutside);\n                    minOutside = Math.min(Math.min(...listTemperaturesOutside), minOutside);\n\n                    var prettyDate = lastRecordedOutsideDay.toISOString().split('T')[0]\n                    dailyListOutside.push({ day: prettyDate, label: \"outside\", max: maxOutside, min: minOutside, avr: avrOutside, std: stdOutside });\n\n                    listTemperaturesOutside = []\n\n                    maxOutside = -1000;\n                    minOutside = 1000;\n\n                    lastRecordedOutsideDay = new Date(date[0]);\n\n                }\n\n                listTemperaturesOutside.push(temperature);\n\n            }\n        }\n    }\n}\n\n//add last day statistics\n\nvar stdInside = parseFloat(getStandardDeviation(listTemperaturesInside).toFixed(3));\nvar avrInside = parseFloat(getAverage(listTemperaturesInside).toFixed(3));\nmaxInside = Math.max(Math.max(...listTemperaturesInside), maxInside);\nminInside = Math.min(Math.min(...listTemperaturesInside), minInside);\nvar prettyDate = lastRecordedInsideDay.toISOString().split('T')[0]\ndailyListInside.push({ day: prettyDate, label: \"inside\", max: maxInside, min: minInside, avr: avrInside, std: stdInside });\n\nvar stdOutside = parseFloat(getStandardDeviation(listTemperaturesOutside).toFixed(3));\nvar avrOutside = parseFloat(getAverage(listTemperaturesOutside).toFixed(3));\nmaxOutside = Math.max(Math.max(...listTemperaturesOutside), maxOutside);\nminOutside = Math.min(Math.min(...listTemperaturesOutside), minOutside);\nvar prettyDate = lastRecordedOutsideDay.toISOString().split('T')[0]\ndailyListOutside.push({ day: prettyDate, label: \"outside\", max: maxOutside, min: minOutside, avr: avrOutside, std: stdOutside });\n\nmsg.payload = dailyListInside.concat(dailyListOutside);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 730,
        "y": 120,
        "wires": [
            [
                "2a6a6c9d76267a07"
            ]
        ]
    },
    {
        "id": "c3aa635e108b66b7",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "addMonthlyHistoricalToDB",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar monthlyListInside = [];\nvar maxInside = -1000;\nvar minInside = 1000;\nvar listTemperaturesInside = [];\n\nvar monthlyListOutside = [];\nvar maxOutside = -1000;\nvar minOutside = 1000;\nvar listTemperaturesOutside = [];\n\n\nfunction getStandardDeviation(array) {\n    const n = array.length\n    const mean = array.reduce((a, b) => a + b) / n\n    return Math.sqrt(array.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b) / n)\n}\n\n\nfunction getAverage(array) {\n    const n = array.length\n    return array.reduce((a, b) => a + b) / n\n}\n\nvar lastRecordedMonth = new Date(allLines[1].split(\",\")[0].split(\" \")[0]);\nvar lastRecordedInsideMonth = new Date(allLines[1].split(\",\")[0].split(\" \")[0]);\nvar lastRecordedOutsideMonth = lastRecordedInsideMonth;\n\n\nfor (let index = 1; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n\n    if (lineSplit.length == 3) {\n\n        var date = lineSplit[0].split(\" \");\n\n        if (lineSplit[1] != \"\") {\n\n            var temperature = parseFloat(parseFloat(lineSplit[1]).toFixed(3));\n            var label = lineSplit[2];\n\n            if (label == \"inside\") {\n\n                if (lastRecordedInsideMonth.getMonth() != new Date(date[0]).getMonth()) {\n\n                    const stdInside = parseFloat(getStandardDeviation(listTemperaturesInside).toFixed(3));\n                    const avrInside = parseFloat(getAverage(listTemperaturesInside).toFixed(3));\n                    var month = lastRecordedInsideMonth.getUTCMonth() + 1;\n                    if (month.toString().length == 1){\n                        month = \"0\"+month;\n                    }\n                    var year = lastRecordedInsideMonth.getUTCFullYear();\n                    var prettyDate = year + \"-\" + month;\n                    monthlyListInside.push({ month: prettyDate, label: \"inside\", max: maxInside, min: minInside, avr: avrInside, std: stdInside });\n\n                    listTemperaturesInside = []\n\n                    maxInside = -1000;\n                    minInside = 1000;\n\n                    lastRecordedInsideMonth = new Date(date[0]);\n\n                }\n\n                maxInside = Math.max(maxInside, temperature);\n                minInside = Math.min(minInside, temperature);\n                listTemperaturesInside.push(temperature);\n\n            } else {\n\n                if (lastRecordedOutsideMonth.getMonth() != new Date(date[0]).getMonth()) {\n\n                    const stdOutside = parseFloat(getStandardDeviation(listTemperaturesOutside).toFixed(3));\n                    const avrOutside = parseFloat(getAverage(listTemperaturesOutside).toFixed(3));\n                    var month = lastRecordedOutsideMonth.getUTCMonth() + 1;\n                    if (month.toString().length == 1) {\n                        month = \"0\" + month;\n                    }\n                    var year = lastRecordedOutsideMonth.getUTCFullYear();\n                    var prettyDate = year + \"-\" + month;\n                    monthlyListOutside.push({ month: prettyDate, label: \"outside\", max: maxOutside, min: minOutside, avr: avrOutside, std: stdOutside });\n\n                    listTemperaturesOutside = []\n\n                    maxOutside = -1000;\n                    minOutside = 1000;\n\n                    lastRecordedOutsideMonth = new Date(date[0]);\n\n                }\n\n                maxOutside = Math.max(maxOutside, temperature);\n                minOutside = Math.min(minOutside, temperature);\n                listTemperaturesOutside.push(temperature);\n\n            }\n        }\n    }\n}\n\nconst stdInside = parseFloat(getStandardDeviation(listTemperaturesInside).toFixed(3));\nconst avrInside = parseFloat(getAverage(listTemperaturesInside).toFixed(3));\nvar month = lastRecordedInsideMonth.getUTCMonth() + 1;\nvar year = lastRecordedInsideMonth.getUTCFullYear();\nvar prettyDate = year + \"-\" + month;\nmonthlyListInside.push({ month: prettyDate, label: \"inside\", max: maxInside, min: minInside, avr: avrInside, std: stdInside });\n\nconst stdOutside = parseFloat(getStandardDeviation(listTemperaturesOutside).toFixed(3));\nconst avrOutside = parseFloat(getAverage(listTemperaturesOutside).toFixed(3));\nvar month = lastRecordedInsideMonth.getUTCMonth() + 1;\nvar year = lastRecordedInsideMonth.getUTCFullYear();\nvar prettyDate = year + \"-\" + month;\nmonthlyListOutside.push({ month: prettyDate, label: \"outside\", max: maxOutside, min: minOutside, avr: avrOutside, std: stdOutside });\n\nmsg.payload = monthlyListInside.concat(monthlyListOutside);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 740,
        "y": 160,
        "wires": [
            [
                "e1e001cce52d86aa"
            ]
        ]
    },
    {
        "id": "f401a719cf9c26d5",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "RemoveAll",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{}",
        "payloadType": "json",
        "x": 400,
        "y": 300,
        "wires": [
            [
                "afd76e27b81eec37"
            ]
        ]
    },
    {
        "id": "afd76e27b81eec37",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "allHistoricals",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 760,
        "y": 300,
        "wires": []
    },
    {
        "id": "337b76493fab60d4",
        "type": "file in",
        "z": "dccf530a3e633ba1",
        "name": "",
        "filename": "historicalUpdated.data",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2440,
        "y": 140,
        "wires": [
            [
                "c9b0ed8151e954e3",
                "ea12b73099a56481"
            ]
        ]
    },
    {
        "id": "afccc78760dac682",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "Generate_Data_For_Datasets",
        "props": [
            {
                "p": "filename",
                "v": "historical.data",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "1",
        "topic": "",
        "x": 2140,
        "y": 140,
        "wires": [
            [
                "337b76493fab60d4"
            ]
        ]
    },
    {
        "id": "a352c0bb1841beed",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "minimumDate",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "dda358aacb046cb6",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "maximumDate",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 800,
        "y": 780,
        "wires": [
            []
        ]
    },
    {
        "id": "41502e2e1b3b37ab",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "getEarliestDate",
        "func": "var earliestDate = new Date(\"2018-02-22\").getTime();\nmsg.payload = earliestDate;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 740,
        "wires": [
            [
                "a352c0bb1841beed"
            ]
        ]
    },
    {
        "id": "cd480522013bcd74",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "getLatestDate",
        "func": "var latestDate = new Date(\"2020-11-30\").getTime();\nmsg.payload = latestDate;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 580,
        "y": 780,
        "wires": [
            [
                "dda358aacb046cb6"
            ]
        ]
    },
    {
        "id": "ed2a916768ba26b6",
        "type": "file",
        "z": "dccf530a3e633ba1",
        "name": "",
        "filename": "outside.data",
        "filenameType": "str",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2990,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "ea12b73099a56481",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "outsideFiltering",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar totalEntriesUpdated = \"\";\n\nfor (let index = 1; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n\n    if (lineSplit.length == 3) {\n\n        var date = lineSplit[0].split(\" \");\n\n        if (date.length == 2 && lineSplit[0] != \"\" && lineSplit[1] != \"\" && lineSplit[2] != \"\") {\n\n            var temperature = parseInt(parseFloat(parseFloat(lineSplit[1]).toFixed(3))*1000);\n\n            var label = lineSplit[2];\n\n            if (label == \"outside\") {\n\n                var hour = parseInt(date[1].split(\":\")[0]);\n                var minute = parseInt(date[1].split(\":\")[1]);\n                var day = parseInt(date[0].split(\"-\")[2]);\n                var month = parseInt(date[0].split(\"-\")[1]);\n                var year = parseInt(date[0].split(\"-\")[0]);\n\n                if (Number.isInteger(hour) && Number.isInteger(minute) && Number.isInteger(day) && Number.isInteger(month) && Number.isInteger(year)) {\n                    var formattedString = hour + \",\" + minute + \",\" + day + \",\" + month + \",\" + year + \",\" + temperature + \"\\n\";\n                    totalEntriesUpdated = totalEntriesUpdated.concat(formattedString);\n                }\n            }\n        }\n    }\n}\n\nmsg.payload = totalEntriesUpdated;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2700,
        "y": 120,
        "wires": [
            [
                "ed2a916768ba26b6"
            ]
        ]
    },
    {
        "id": "f6e6d006f061c1c8",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Get earliest and latest date of historical.data (updated at every entry)",
        "info": "",
        "x": 720,
        "y": 700,
        "wires": []
    },
    {
        "id": "c9b0ed8151e954e3",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "insideOutsideFiltering",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar totalEntriesUpdated = \"\";\n\nvar previousEntry = \"\";\n\nfor (let index = 1; index < allLines.length; index++) {\n    var lineSplit = allLines[index].split(\",\");\n\n    if (previousEntry.length == 0) {\n\n        previousEntry = lineSplit[1];\n\n    } else {\n\n        if (lineSplit.length == 3) {\n\n            var date = lineSplit[0].split(\" \");\n\n            if (date.length == 2 && lineSplit[0] != \"\" && lineSplit[1] != \"\" && lineSplit[2] != \"\") {\n\n                var label = lineSplit[2];\n                var hour = parseInt(date[1].split(\":\")[0]);\n                var minute = parseInt(date[1].split(\":\")[1]);\n                var day = parseInt(date[0].split(\"-\")[2]);\n                var month = parseInt(date[0].split(\"-\")[1]);\n                var year = parseInt(date[0].split(\"-\")[0]);\n\n                if (label == \"outside\") {\n\n                    var temperatureOutside = parseInt(parseFloat(parseFloat(lineSplit[1]).toFixed(3)) * 1000);\n                    var temperatureInside = parseInt(parseFloat(parseFloat(previousEntry).toFixed(3)) * 1000);\n                    previousEntry = \"\";\n\n                    if (Number.isInteger(hour) && Number.isInteger(minute) && Number.isInteger(day) && Number.isInteger(month) && Number.isInteger(year)) {\n                        var formattedString = hour + \",\" + minute + \",\" + day + \",\" + month + \",\" + year + \",\" + temperatureOutside + \",\" + temperatureInside + \"\\n\";\n                        totalEntriesUpdated = totalEntriesUpdated.concat(formattedString);\n                    }\n                } else {\n\n                    var temperatureOutside = parseInt(parseFloat(parseFloat(previousEntry).toFixed(3)) * 1000);\n                    var temperatureInside = parseInt(parseFloat(parseFloat(lineSplit[1]).toFixed(3)) * 1000);\n                    previousEntry = \"\";\n\n                    if (Number.isInteger(hour) && Number.isInteger(minute) && Number.isInteger(day) && Number.isInteger(month) && Number.isInteger(year)) {\n                        var formattedString = hour + \",\" + minute + \",\" + day + \",\" + month + \",\" + year + \",\" + temperatureOutside + \",\" + temperatureInside + \"\\n\";\n                        totalEntriesUpdated = totalEntriesUpdated.concat(formattedString);\n                    }\n                }\n            }\n        }\n    }\n}\n\nmsg.payload = totalEntriesUpdated;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2720,
        "y": 180,
        "wires": [
            [
                "3e3244df0505ab39"
            ]
        ]
    },
    {
        "id": "3e3244df0505ab39",
        "type": "file",
        "z": "dccf530a3e633ba1",
        "name": "",
        "filename": "inside.data",
        "filenameType": "str",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 2990,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "888951269ef41881",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Example of model training/testing and evaluating for inside.data and outside.data models",
        "info": "",
        "x": 2600,
        "y": 60,
        "wires": []
    },
    {
        "id": "3516e1dd97d63d9a",
        "type": "create dataset",
        "z": "dccf530a3e633ba1",
        "name": "createInsideDataset",
        "path": "inside.data",
        "saveFolder": "datasets",
        "saveName": "inside",
        "input": "0,1,2,3,4,5",
        "output": "6",
        "trainingPartition": "",
        "shuffle": false,
        "seed": "",
        "x": 2300,
        "y": 460,
        "wires": [
            [
                "dfa8f90c9e68a8fe"
            ]
        ]
    },
    {
        "id": "d4c30fcd11579edc",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2040,
        "y": 460,
        "wires": [
            [
                "3516e1dd97d63d9a"
            ]
        ]
    },
    {
        "id": "308985fc64b5c21b",
        "type": "multi layer perceptron classifier",
        "z": "dccf530a3e633ba1",
        "name": "",
        "savePath": "models",
        "saveName": "inside.c",
        "layers": "200, 100, 200",
        "activation": "relu",
        "solver": "adam",
        "learningRate": "0.003",
        "maxIter": "2000",
        "batchSize": "",
        "x": 2850,
        "y": 520,
        "wires": [
            [
                "bb14e6a1d730179a"
            ],
            [
                "58d9482880a5a0e1"
            ]
        ]
    },
    {
        "id": "51932b62cd63945c",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "loadTrainDataset",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar totalEntriesUpdated = [];\n\nfor (let index = 0; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n\n    if (lineSplit.length == 7) {\n\n        var hour = parseInt(lineSplit[0]);\n        var minute = parseInt(lineSplit[1]);\n        var day = parseInt(lineSplit[2]);\n        var month = parseInt(lineSplit[3]);\n        var year = parseInt(lineSplit[4]);\n        var temperatureOutside = parseInt(lineSplit[5]);\n        var temperatureInside = parseInt(lineSplit[6]);\n\n        var curArray = [hour, minute, day, month, year, temperatureOutside, temperatureInside];\n        totalEntriesUpdated.push(curArray);\n\n    }\n    \n}\n\nmsg.payload = totalEntriesUpdated;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2550,
        "y": 520,
        "wires": [
            [
                "308985fc64b5c21b"
            ]
        ]
    },
    {
        "id": "7b2377490ccbf961",
        "type": "file in",
        "z": "dccf530a3e633ba1",
        "name": "",
        "filename": "datasets/inside/train.csv",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2270,
        "y": 520,
        "wires": [
            [
                "51932b62cd63945c"
            ]
        ]
    },
    {
        "id": "5de9c4a9e6389574",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2040,
        "y": 520,
        "wires": [
            [
                "7b2377490ccbf961"
            ]
        ]
    },
    {
        "id": "8acc27b37fc893c9",
        "type": "file in",
        "z": "dccf530a3e633ba1",
        "name": "",
        "filename": "datasets/inside/test.csv",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 2270,
        "y": 580,
        "wires": [
            [
                "8a7f2b06faf51709",
                "c65233ee804ba9d8"
            ]
        ]
    },
    {
        "id": "1e59145a55e30656",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 2040,
        "y": 580,
        "wires": [
            [
                "8acc27b37fc893c9"
            ]
        ]
    },
    {
        "id": "2387ede65e0a79f9",
        "type": "predictor",
        "z": "dccf530a3e633ba1",
        "name": "outside predictor",
        "modelPath": "models",
        "modelName": "outside.c",
        "x": 2910,
        "y": 620,
        "wires": [
            [
                "3ff2013067a2b202"
            ],
            []
        ]
    },
    {
        "id": "3ff2013067a2b202",
        "type": "assessment",
        "z": "dccf530a3e633ba1",
        "name": "",
        "score": "accuracy_score",
        "x": 2890,
        "y": 580,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "8a7f2b06faf51709",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "loadInputTestOutsideDataset",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar totalEntriesUpdated = [];\n\nfor (let index = 0; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n    if (lineSplit.length == 7) {\n        var temperature = parseInt(lineSplit[6]);\n        var curArray = temperature;\n        totalEntriesUpdated.push(curArray);\n    }\n}\n\nmsg.payload = totalEntriesUpdated;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2580,
        "y": 580,
        "wires": [
            [
                "3ff2013067a2b202"
            ]
        ]
    },
    {
        "id": "c65233ee804ba9d8",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "loadOutputTestOutsideDataset",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nvar totalEntriesUpdated = [];\n\nfor (let index = 0; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n\n    if (lineSplit.length == 7) {\n\n        var hour = parseInt(lineSplit[0]);\n        var minute = parseInt(lineSplit[1]);\n        var day = parseInt(lineSplit[2]);\n        var month = parseInt(lineSplit[3]);\n        var year = parseInt(lineSplit[4]);\n        var temperatureOutside = parseInt(lineSplit[5]);\n\n        var curArray = [hour, minute, day, month, year, temperatureOutside];\n        totalEntriesUpdated.push(curArray);\n\n    }\n    \n}\n\nmsg.payload = totalEntriesUpdated;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 2590,
        "y": 620,
        "wires": [
            [
                "2387ede65e0a79f9"
            ]
        ]
    },
    {
        "id": "c63a4d59c8059c56",
        "type": "debug",
        "z": "dccf530a3e633ba1",
        "name": "debug 1",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2560,
        "y": 240,
        "wires": []
    },
    {
        "id": "dfa8f90c9e68a8fe",
        "type": "debug",
        "z": "dccf530a3e633ba1",
        "name": "debug 2",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 2540,
        "y": 460,
        "wires": []
    },
    {
        "id": "23d0ebe3921c63c5",
        "type": "debug",
        "z": "dccf530a3e633ba1",
        "name": "debug 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 3100,
        "y": 280,
        "wires": []
    },
    {
        "id": "e3bdab3d6a2ed673",
        "type": "debug",
        "z": "dccf530a3e633ba1",
        "name": "debug 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 3100,
        "y": 320,
        "wires": []
    },
    {
        "id": "bb14e6a1d730179a",
        "type": "debug",
        "z": "dccf530a3e633ba1",
        "name": "debug 5",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 3080,
        "y": 500,
        "wires": []
    },
    {
        "id": "58d9482880a5a0e1",
        "type": "debug",
        "z": "dccf530a3e633ba1",
        "name": "debug 6",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "statusVal": "",
        "statusType": "auto",
        "x": 3080,
        "y": 540,
        "wires": []
    },
    {
        "id": "f5d9f5aeab15e5c6",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "Outside Temperature",
        "group": "1e15e58adbf0f158",
        "order": 1,
        "width": "8",
        "height": "6",
        "gtype": "gage",
        "title": "Outside Temperature of hour: {{msg.payload}}",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": "50",
        "colors": [
            "#00fbff",
            "#e6e600",
            "#ff0000"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1160,
        "y": 1620,
        "wires": []
    },
    {
        "id": "d312fc2bf423f427",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 27",
        "func": "var line;\nif (msg.payload[0].label == \"outside\") {\n    line = msg.payload[0];\n} else {\n    line = msg.payload[1];\n}\n\nvar date = line.date.split(\" \")[1];\nvar currentHour = date.split(\":\")[0] + \":\" + date.split(\":\")[1];\n\nmsg.value = parseFloat(parseFloat(line.temperature).toFixed(3));\nmsg.payload = currentHour;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 1620,
        "wires": [
            [
                "f5d9f5aeab15e5c6",
                "1a12a54f3cc953f2",
                "f47417d520125f44"
            ]
        ]
    },
    {
        "id": "b3a94e7cdec4d146",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 28",
        "func": "var line;\nif (msg.payload[0].label == \"inside\") {\n    line = msg.payload[0];\n} else {\n    line = msg.payload[1];\n}\n\n\nvar date = line.date.split(\" \")[1];\nvar currentHour = date.split(\":\")[0] + \":\" + date.split(\":\")[1];\n\nmsg.value = parseFloat(parseFloat(line.temperature).toFixed(3));\nmsg.payload = currentHour;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 950,
        "y": 1660,
        "wires": [
            [
                "d4ad31c24d7f9986",
                "c0054541d5676fb4",
                "1fb9d406c2e28997"
            ]
        ]
    },
    {
        "id": "d4ad31c24d7f9986",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "Inside Temperature",
        "group": "0ae6d5e875f99e45",
        "order": 5,
        "width": "8",
        "height": "6",
        "gtype": "gage",
        "title": "Inside Temperature of hour: {{msg.payload}}",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": "50",
        "colors": [
            "#00fbff",
            "#e6e600",
            "#ff0000"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1150,
        "y": 1700,
        "wires": []
    },
    {
        "id": "5fc56de1282973f4",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "Add_Historical_To_DB",
        "props": [
            {
                "p": "filename",
                "v": "historical.data",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "1",
        "topic": "",
        "x": 160,
        "y": 140,
        "wires": [
            [
                "0faa586a2a8757f1"
            ]
        ]
    },
    {
        "id": "0faa586a2a8757f1",
        "type": "file in",
        "z": "dccf530a3e633ba1",
        "name": "",
        "filename": "historicalUpdated.data",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 420,
        "y": 140,
        "wires": [
            [
                "d8165e9bd962aa43",
                "e9633f101c13d24d",
                "c3aa635e108b66b7",
                "e107c6a8bfd0c68c"
            ]
        ]
    },
    {
        "id": "e2a5716adfe546a2",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "defineOutsidePredictionsBuffer",
        "func": "var allLines = msg.payload.split(\"\\n\");\nvar array = []\n\nfor (let index = 0; index < allLines.length-1; index++) {\n    array.push(parseFloat(parseFloat(allLines[index]).toFixed(3)));\n}\n\nflow.set(\"outsidePredictions\", array);\nmsg.payload = array;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 690,
        "y": 1140,
        "wires": [
            [
                "d8f41b492f8a399d"
            ]
        ]
    },
    {
        "id": "4a13638a6826c1a9",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "defineInsidePredictionsBuffer",
        "func": "var allLines = msg.payload.split(\"\\n\");\nvar array = []\n\nfor (let index = 0; index < allLines.length - 1; index++) {\n    array.push(parseFloat(parseFloat(allLines[index]).toFixed(3)));\n}\n\nflow.set(\"insidePredictions\", array);\nmsg.payload = array;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 680,
        "y": 1100,
        "wires": [
            []
        ]
    },
    {
        "id": "b8db1f490b922100",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "1",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 360,
        "y": 760,
        "wires": [
            [
                "41502e2e1b3b37ab",
                "cd480522013bcd74"
            ]
        ]
    },
    {
        "id": "e90d4f5c3ae11748",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "Total Monthly Graph",
        "group": "520b7a25bf081dbf",
        "order": 1,
        "width": "32",
        "height": "10",
        "label": "{{msg.label}}",
        "chartType": "line",
        "legend": "true",
        "xformat": "auto",
        "interpolate": "linear",
        "nodata": "",
        "dot": true,
        "ymin": "0",
        "ymax": "50",
        "removeOlder": "30",
        "removeOlderPoints": "96",
        "removeOlderUnit": "60",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffaa",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#d62728",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 3640,
        "y": 3200,
        "wires": [
            []
        ]
    },
    {
        "id": "a71f698db4c9cadc",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 30",
        "func": "var monthlyData = msg.payload;\n\nvar listOfInsideTemperatures = [];\nvar listOfOutsideTemperatures = [];\nvar listOfMonths = [];\n\nfor (let index = 0; index < monthlyData.length; index++) {\n    const lineInfo = monthlyData[index];\n    if(lineInfo.label == \"inside\"){\n        listOfInsideTemperatures.push(lineInfo.avr);\n        var month = lineInfo.month;\n        listOfMonths.push(month);\n    } else if (lineInfo.label == \"outside\") {\n        listOfOutsideTemperatures.push(lineInfo.avr);\n    }\n}\n\nmsg.payload = [{ \"series\": [\"INSIDE\", \"OUTSIDE\"], \"data\": [listOfInsideTemperatures, listOfOutsideTemperatures], \"labels\": listOfMonths}]\nmsg.label = \"Temperature variations until now (by monthly average)\";\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 3430,
        "y": 3200,
        "wires": [
            [
                "e90d4f5c3ae11748"
            ]
        ]
    },
    {
        "id": "eff95f880d8b833f",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "[]",
        "payloadType": "json",
        "x": 1070,
        "y": 2920,
        "wires": [
            [
                "d87963a7161bcb0f"
            ]
        ]
    },
    {
        "id": "73ef0844ddb2ea3c",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "[]",
        "payloadType": "json",
        "x": 1050,
        "y": 3720,
        "wires": [
            [
                "3ff0dc9bc5081f41"
            ]
        ]
    },
    {
        "id": "43c4d729eb7940c6",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "[]",
        "payloadType": "json",
        "x": 2570,
        "y": 3660,
        "wires": [
            [
                "9230f1e947a24dd0"
            ]
        ]
    },
    {
        "id": "805073d26672620c",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "reset",
                "v": "true",
                "vt": "bool"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "[]",
        "payloadType": "json",
        "x": 2650,
        "y": 2780,
        "wires": [
            [
                "c64099f311ece742"
            ]
        ]
    },
    {
        "id": "1a12a54f3cc953f2",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "9f7d723fbcbca6b1",
        "order": 2,
        "width": "12",
        "height": "6",
        "gtype": "gage",
        "title": "Received Outside Temperature",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": "50",
        "colors": [
            "#00fbff",
            "#e6e600",
            "#ff0000"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1190,
        "y": 1580,
        "wires": []
    },
    {
        "id": "c0054541d5676fb4",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "9f7d723fbcbca6b1",
        "order": 3,
        "width": "12",
        "height": "6",
        "gtype": "gage",
        "title": "Received Inside Temperature",
        "label": "units",
        "format": "{{value}}",
        "min": 0,
        "max": "50",
        "colors": [
            "#00fbff",
            "#e6e600",
            "#ff0000"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1180,
        "y": 1660,
        "wires": []
    },
    {
        "id": "3d6e818dd57a8c1f",
        "type": "ui_switch",
        "z": "dccf530a3e633ba1",
        "name": "",
        "label": "Enable/Disable Detailed Statistics",
        "tooltip": "",
        "group": "9f7d723fbcbca6b1",
        "order": 4,
        "width": "8",
        "height": "6",
        "passthru": true,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "",
        "oncolor": "",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "",
        "offcolor": "",
        "animate": false,
        "className": "",
        "x": 1320,
        "y": 2340,
        "wires": [
            [
                "2577a527a4e67a48"
            ]
        ]
    },
    {
        "id": "2577a527a4e67a48",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 33",
        "func": "if(msg.payload == true){\n    msg.payload = { \"group\": { \"show\": [\"Live_Inside_Prediction_Details\", \"Live_Outside_Prediction_Details\", \"Live_Thermal_and_Deviations_Details\"] } }\n} else {\n    msg.payload = { \"group\": { \"hide\": [\"Live_Inside_Prediction_Details\", \"Live_Outside_Prediction_Details\", \"Live_Thermal_and_Deviations_Details\"] } }\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1590,
        "y": 2340,
        "wires": [
            [
                "588530a466d032fc"
            ]
        ]
    },
    {
        "id": "588530a466d032fc",
        "type": "ui_ui_control",
        "z": "dccf530a3e633ba1",
        "name": "",
        "events": "all",
        "x": 1760,
        "y": 2340,
        "wires": [
            []
        ]
    },
    {
        "id": "fb803cf46f668b64",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "create_week_buffer",
        "func": "class WeekBuffer {\n    constructor(initial_buffer, predictions) {\n        this.number_in_a_week = initial_buffer.length;\n        this.nr_of_predictions = predictions.length;\n        this.total_buffer = initial_buffer.concat(predictions);\n    }\n\n\n\n\n    new_real_value(new_value) {\n        this.total_buffer[this.total_buffer.length - this.nr_of_predictions] = new_value\n    }\n\n    new_predict_value(new_value) {\n        this.total_buffer.push(new_value)\n        this.total_buffer.shift()\n    }\n\n\n    // Ao receber dado\n    // Adicionar nova prediction e remover a mais antiga\n    //Predict(das 4 primeiras)\n    //Antes de 00:00 total = 7 dias atrás predicts = [00:00, 00:30, 01:00, 01:30]\n    //Ao receber 00:00 predict das 2\n    //Depois de receber 00: 00 total = 7 dias - 1 dado + 00:00 predicts = [00: 30, 01: 00, 01: 30, 02:00]\n    //Antes de 00: 30 total = 7 dias - 1 dado + 00: 00 atrás predicts = [00: 30, 01: 00, 01: 30, 02: 00]\n    //Ao receber 00: 30 predict das 2:30\n    //Depois de receber 00: 30 total = 7 dias - 1 dado + 00: 30 predicts = [01: 00, 01: 30, 02: 00, 02:30]\n\n\n    forecast() {\n\n        const total_buffer = this.total_buffer;\n\n        var averages = [];\n\n        for (var i = 0; i < this.nr_of_predictions + 1; i++) {\n            var current_buffer = Array.from(total_buffer).slice(i, this.number_in_a_week + i);\n            var sum = 0;\n            Array.from(current_buffer).forEach(function (num) { sum += num });\n            averages.push(parseFloat(parseFloat(sum / current_buffer.length).toFixed(3)));\n        }\n\n        return averages;\n    }\n\n    first_forecast() {\n\n        const total_buffer = this.total_buffer;\n\n        var averages = [];\n\n        for (var i = 0; i < this.nr_of_predictions; i++) {\n            var current_buffer = Array.from(total_buffer).slice(i, this.number_in_a_week + i);\n            var sum = 0;\n            Array.from(current_buffer).forEach(function (num) { sum += num });\n            averages.push(parseFloat(parseFloat(sum / current_buffer.length).toFixed(3)));\n        }\n        \n        return averages;\n    }\n\n\n\n}\n\n// Predictions do 00:00, 00:30, 01:00 e 01:30\n\n//MUDAR INITIAL PREDICTS PARA PREDICTS REAIS\nvar arrayPredictions = flow.get(\"outsidePredictions\");\nvar initial_predictions = [arrayPredictions[0], arrayPredictions[1], arrayPredictions[2], arrayPredictions[3]];\nflow.set(\"buffer\", new WeekBuffer(msg.payload, initial_predictions));\nmsg.payload = \"Created Week Buffer\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1490,
        "y": 1140,
        "wires": [
            [
                "df3212af45f23c60"
            ]
        ]
    },
    {
        "id": "d8f41b492f8a399d",
        "type": "exec",
        "z": "dccf530a3e633ba1",
        "command": "tail -n 672 historicalUpdated.data",
        "addpay": "",
        "append": "",
        "useSpawn": "false",
        "timer": "",
        "winHide": false,
        "oldrc": false,
        "name": "",
        "x": 1020,
        "y": 1140,
        "wires": [
            [
                "dea9773ff6effbe1"
            ],
            [],
            []
        ]
    },
    {
        "id": "dea9773ff6effbe1",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterOutside",
        "func": "var allLines = msg.payload.split(\"\\n\");\n\nmsg.payload = [];\n\nfor (let index = 0; index < allLines.length; index++) {\n\n    var lineSplit = allLines[index].split(\",\");\n\n    var date = lineSplit[0].split(\" \");\n\n    var temperature = parseFloat(parseFloat(lineSplit[1]).toFixed(3));\n\n    var label = lineSplit[2];\n    \n    if (label == \"outside\") {\n\n        msg.payload.push(temperature);\n\n    }\n\n}\n\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1290,
        "y": 1140,
        "wires": [
            [
                "fb803cf46f668b64"
            ]
        ]
    },
    {
        "id": "df3212af45f23c60",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 4",
        "func": "\nvar bufferClass = flow.get(\"buffer\");\n\nmsg.payload = bufferClass.first_forecast();\n\nflow.set(\"buffer\", bufferClass);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1700,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "a1602cbf33ebb3ee",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "Thermal Confort",
        "group": "ae02fd3971e81b07",
        "order": 9,
        "width": "8",
        "height": "6",
        "gtype": "gage",
        "title": "Thermal Confort for hour: {{msg.payload[0]}}",
        "label": "units",
        "format": "{{msg.payload[1][0]}}",
        "min": 0,
        "max": "30",
        "colors": [
            "#00fbff",
            "#e6e600",
            "#ff0000"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1040,
        "y": 2220,
        "wires": []
    },
    {
        "id": "c2092789a66d4e11",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "getPredictions",
        "func": "var lineOutside;\nvar lineInside;\nif (msg.payload[0].label == \"outside\"){\n    lineOutside = msg.payload[0];\n    lineInside = msg.payload[1];\n} else {\n    lineOutside = msg.payload[1];\n    lineInside = msg.payload[0];\n}\n\nvar outsideTemperature = parseFloat(parseFloat(lineOutside.temperature).toFixed(3));\nvar insideTemperature = parseFloat(parseFloat(lineInside.temperature).toFixed(3));\n\nvar date = lineOutside.date.split(\" \")[1];\nvar currentHour = date.split(\":\")[0] + \":\" + date.split(\":\")[1];\n\nvar arrayOutside = flow.get(\"outsidePredictions\");\nvar outsideCounter = flow.get(\"outsideCounter\");\nvar fivePredictionsOutside = arrayOutside.slice(outsideCounter, outsideCounter+5);\noutsideCounter = outsideCounter + 1;\nflow.set(\"outsideCounter\", outsideCounter);\n\nvar arrayInside = flow.get(\"insidePredictions\");\nvar insideCounter = flow.get(\"insideCounter\");\nvar fivePredictionsInside = arrayInside.slice(insideCounter, insideCounter + 5);\ninsideCounter = insideCounter + 1;\nflow.set(\"insideCounter\", insideCounter);\n\n\nmsg.payload = [fivePredictionsOutside, fivePredictionsInside, currentHour]\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 940,
        "y": 1820,
        "wires": [
            [
                "04966d0c6afc76de",
                "3ae57172ec30fc58",
                "c2a3a3d4b142c1c6",
                "fe44a70415d0b9d1",
                "08c138e8caced8e8",
                "f47417d520125f44",
                "1fb9d406c2e28997"
            ]
        ]
    },
    {
        "id": "194a46cfe7c222e2",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "defineInsideCounterPredictions",
        "func": "var increment = 0;\nflow.set(\"insideCounter\", increment);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1180,
        "wires": [
            []
        ]
    },
    {
        "id": "3b81f5484a421839",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "defineOutsideCounterPredictions",
        "func": "var increment = 0;\nflow.set(\"outsideCounter\", increment);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 440,
        "y": 1220,
        "wires": [
            []
        ]
    },
    {
        "id": "04966d0c6afc76de",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "Predicted Outside Temperature",
        "group": "1e15e58adbf0f158",
        "order": 2,
        "width": "8",
        "height": "6",
        "gtype": "gage",
        "title": "Predicted Outside Temperature for hour: {{msg.payload[2]}}",
        "label": "units",
        "format": "{{msg.payload[0][0]}}",
        "min": 0,
        "max": "50",
        "colors": [
            "#00fbff",
            "#e6e600",
            "#ff0000"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1290,
        "y": 1780,
        "wires": []
    },
    {
        "id": "3ae57172ec30fc58",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "Predicted InsideTemperature",
        "group": "0ae6d5e875f99e45",
        "order": 6,
        "width": "8",
        "height": "6",
        "gtype": "gage",
        "title": "Predicted Inside Temperature for hour: {{msg.payload[2]}}",
        "label": "units",
        "format": "{{msg.payload[1][0]}}",
        "min": 0,
        "max": "50",
        "colors": [
            "#00fbff",
            "#e6e600",
            "#ff0000"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1280,
        "y": 1860,
        "wires": []
    },
    {
        "id": "88db5412e31c97da",
        "type": "file in",
        "z": "dccf530a3e633ba1",
        "name": "",
        "filename": "inside_predictions.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 400,
        "y": 1100,
        "wires": [
            [
                "4a13638a6826c1a9"
            ]
        ]
    },
    {
        "id": "b000f91843300eaf",
        "type": "file in",
        "z": "dccf530a3e633ba1",
        "name": "",
        "filename": "outside_predictions.txt",
        "filenameType": "str",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 400,
        "y": 1140,
        "wires": [
            [
                "e2a5716adfe546a2"
            ]
        ]
    },
    {
        "id": "bed149260affa08f",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "defineOnlineOutsideDataBuffer",
        "func": "var array = []\nflow.set(\"onlineOutsideData\", array);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 1300,
        "wires": [
            []
        ]
    },
    {
        "id": "6116962b5b31c3ea",
        "type": "ui_gauge",
        "z": "dccf530a3e633ba1",
        "name": "Air Deviation",
        "group": "ae02fd3971e81b07",
        "order": 11,
        "width": "8",
        "height": "6",
        "gtype": "gage",
        "title": "Air Temperature Deviation of hour: {{msg.payload[0]}}",
        "label": "units",
        "format": "{{msg.payload[1][0]}}",
        "min": 0,
        "max": "20",
        "colors": [
            "#00fbff",
            "#e6e600",
            "#ff0000"
        ],
        "seg1": "",
        "seg2": "",
        "className": "",
        "x": 1030,
        "y": 2340,
        "wires": []
    },
    {
        "id": "71184e40e04bf9f8",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "getOutside",
        "func": "var lineOutside;\nif (msg.payload[0].label == \"outside\"){\n    lineOutside = msg.payload[0];\n} else {\n    lineOutside = msg.payload[1];\n}\n\nmsg.payload = parseFloat(parseFloat(lineOutside.temperature).toFixed(3));\n\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 2060,
        "wires": [
            [
                "0be976028215965f"
            ]
        ]
    },
    {
        "id": "d43dae3921d2f8b8",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "getPredictedAverages",
        "func": "var buffer = flow.get(\"buffer\");\n\nvar new_real_val = msg.payload[0];\n\nbuffer.new_real_value(new_real_val);\n\nmsg.payload = buffer.forecast();\n\nvar received_outside_predict_plusTwoHours = msg.payload[1];\n\nbuffer.new_predict_value(received_outside_predict_plusTwoHours);\n\nflow.set(\"buffer\", buffer);\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 860,
        "y": 2060,
        "wires": [
            [
                "8650f71906aba945"
            ]
        ]
    },
    {
        "id": "8650f71906aba945",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "getThermals",
        "func": "var thermals = [];\n\nvar averages = msg.payload;\n\nfor (var i = 0; i < averages.length; i++) {\n    var average = averages[i];\n    if ((average >= 0) && (average <= 9)) {\n        thermals.push( ((-5 * average) / 9) + 23);\n    } else if ((average > 9) && (average <= 34)) {\n        thermals.push( ((12 * average) / 25) + 13.68);  \n    } else {\n        msg.payload = \"Temperature is not valid!\";\n    }\n}\n\nfor (let index = 0; index < thermals.length; index++) {\n    thermals[index] = parseFloat(parseFloat(thermals[index]).toFixed(3));\n}\n\nmsg.payload = thermals;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 2220,
        "wires": [
            [
                "a9228696960146c8"
            ]
        ]
    },
    {
        "id": "a9228696960146c8",
        "type": "join",
        "z": "dccf530a3e633ba1",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 550,
        "y": 2220,
        "wires": [
            [
                "ddcd6374eb316fd3",
                "96b449d85bc55390"
            ]
        ]
    },
    {
        "id": "ddcd6374eb316fd3",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 36",
        "func": "var date = msg.payload[0][0].date.split(\" \")[1];\nvar currentHour = date.split(\":\")[0] + \":\" + date.split(\":\")[1];\n\nmsg.payload = [currentHour, msg.payload[1]]\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 2220,
        "wires": [
            [
                "a1602cbf33ebb3ee",
                "557499f2e65e640b"
            ]
        ]
    },
    {
        "id": "96b449d85bc55390",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "calculateDeviations",
        "func": "var lineInside;\nif (msg.payload[0][0].label == \"inside\") {\n    lineInside = msg.payload[0][0];\n} else {\n    lineInside = msg.payload[0][1];\n}\n\nvar fiveThermalConforts = msg.payload[1];\nvar airDeviations = [];\n\nvar currentTemperature = parseFloat(parseFloat(lineInside.temperature).toFixed(3));\nvar currentDeviation = Math.abs(fiveThermalConforts[0] - currentTemperature);\nairDeviations.push(parseFloat(parseFloat(currentDeviation).toFixed(3)));\n\nvar arrayInside = flow.get(\"insidePredictions\");\nvar insideCounter = flow.get(\"insideCounter\");\nvar fourFuturePredictionsInside = arrayInside.slice(insideCounter, insideCounter + 4);\n\nfor (let index = 1; index < fiveThermalConforts.length; index++) {\n    var deviation = Math.abs(fiveThermalConforts[index] - fourFuturePredictionsInside[index - 1]);\n    airDeviations.push(parseFloat(parseFloat(deviation).toFixed(3)));\n}\n\nvar date = msg.payload[0][0].date.split(\" \")[1];\nvar currentHour = date.split(\":\")[0] + \":\" + date.split(\":\")[1];\n\nmsg.payload = [currentHour, airDeviations];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 610,
        "y": 2340,
        "wires": [
            [
                "6116962b5b31c3ea",
                "6dd01f18277a4674"
            ]
        ]
    },
    {
        "id": "0be976028215965f",
        "type": "join",
        "z": "dccf530a3e633ba1",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 550,
        "y": 2060,
        "wires": [
            [
                "d43dae3921d2f8b8"
            ]
        ]
    },
    {
        "id": "c2a3a3d4b142c1c6",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "filterPredictPlusTwoHours",
        "func": "msg.payload = msg.payload[0][4];\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 870,
        "y": 1940,
        "wires": [
            [
                "0be976028215965f"
            ]
        ]
    },
    {
        "id": "6293a08dc2eac03f",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "defineOnlineDataBuffer",
        "func": "var array = []\nflow.set(\"onlineData\", array);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 410,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "618583aaf5bcfd85",
        "type": "change",
        "z": "dccf530a3e633ba1",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "maximumDate",
                "pt": "flow",
                "to": "payload",
                "tot": "msg"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 200,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "6a158a436bca8c4c",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "getLatestDate",
        "func": "var receivedDate = msg.payload.date.split(\" \")[0];\nvar latestDate = new Date(receivedDate).getTime();\nmsg.payload = latestDate;\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 1720,
        "wires": [
            [
                "618583aaf5bcfd85"
            ]
        ]
    },
    {
        "id": "15f9cc3eba8ae376",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Define flow variables to treat data correctly",
        "info": "",
        "x": 380,
        "y": 1040,
        "wires": []
    },
    {
        "id": "cb1c81d339991bbd",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Generate first predictions for thermal confort of first 4 timestamps (00:00, 00:30, 01:00, 01:30)",
        "info": "",
        "x": 1300,
        "y": 1200,
        "wires": []
    },
    {
        "id": "ceb80a21dc501433",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Reset graph when deploying",
        "info": "",
        "x": 580,
        "y": 1400,
        "wires": []
    },
    {
        "id": "a8a89af40698eb8f",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Switch to display/hide content about predictions",
        "info": "",
        "x": 1520,
        "y": 2300,
        "wires": []
    },
    {
        "id": "0b95216769c7923b",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Show predictions for outside ",
        "info": "",
        "x": 1160,
        "y": 1540,
        "wires": []
    },
    {
        "id": "17ce702ae447c812",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Show predictions for inside",
        "info": "",
        "x": 1290,
        "y": 1740,
        "wires": []
    },
    {
        "id": "cc571f9abd67aa56",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Update latest date",
        "info": "",
        "x": 210,
        "y": 1820,
        "wires": []
    },
    {
        "id": "b381e6b7db6540cf",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Display in Historical tab daily information and related statistics",
        "info": "",
        "x": 280,
        "y": 3180,
        "wires": []
    },
    {
        "id": "14cb4ca29ddff5ac",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Display in Historical tab monthly information and related statistics",
        "info": "",
        "x": 1690,
        "y": 3220,
        "wires": []
    },
    {
        "id": "5a35feb023fa37be",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Display in Historical tab total information about data and related statistics",
        "info": "",
        "x": 3420,
        "y": 2780,
        "wires": []
    },
    {
        "id": "83ab125450a1fd7a",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Create week buffer to calculate thermal confort for a specific received data",
        "info": "",
        "x": 1300,
        "y": 1080,
        "wires": []
    },
    {
        "id": "4fa66e0d338fce23",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "addDayOrMonthToDB",
        "func": "var arrayInside = flow.get(\"onlineInsideData\");\nvar arrayOutside = flow.get(\"onlineOutsideData\");\n\nvar currentDate = msg.payload.date.split(\" \")[0];\nvar test = currentDate.split(\"-\");\nvar updatedDay = parseInt(test[2]) - 1;\nvar updatedDate = test[0] + \"-\" + test[1] + \"-0\" + updatedDay;\nvar dailyInformation = [];\n\nvar line = msg.payload;\n\nfunction getStandardDeviation(array) {\n    const n = array.length\n    const mean = array.reduce((a, b) => a + b) / n\n    return Math.sqrt(array.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b) / n)\n}\n\nfunction getAverage(array) {\n    const n = array.length\n    return array.reduce((a, b) => a + b) / n\n}\n\n\nif(arrayInside.length == 48 && arrayOutside.length == 48){\n    \n    var stdInside = parseFloat(getStandardDeviation(arrayInside).toFixed(3));\n    var avrInside = parseFloat(getAverage(arrayInside).toFixed(3));\n\n    var maxInside = Math.max(...arrayInside);\n    var minInside = Math.min(...arrayInside);\n\n    dailyInformation.push({ day: updatedDate, label: \"inside\", max: maxInside, min: minInside, avr: avrInside, std: stdInside });\n\n    var stdOutside = parseFloat(getStandardDeviation(arrayOutside).toFixed(3));\n    var avrOutside = parseFloat(getAverage(arrayOutside).toFixed(3));\n\n    var maxOutside = Math.max(...arrayOutside);\n    var minOutside = Math.min(...arrayOutside);\n\n    dailyInformation.push({ day: updatedDate, label: \"outside\", max: maxOutside, min: minOutside, avr: avrOutside, std: stdOutside });\n\n    flow.set(\"onlineInsideData\", []);\n    flow.set(\"onlineOutsideData\", []);\n    \n} \n\nif(msg.payload.label == \"inside\"){\n    var arrayInside1 = flow.get(\"onlineInsideData\");\n    arrayInside1.push(parseFloat(parseFloat(line.temperature).toFixed(3)));\n    flow.set(\"onlineInsideData\", arrayInside1);\n} else {\n    var arrayOutside1 = flow.get(\"onlineOutsideData\");\n    arrayOutside1.push(parseFloat(parseFloat(line.temperature).toFixed(3)));\n    flow.set(\"onlineOutsideData\", arrayOutside1);\n}\n\n\nmsg.payload = dailyInformation;\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 500,
        "y": 1500,
        "wires": [
            [
                "e20f09c265722b83"
            ]
        ]
    },
    {
        "id": "e20f09c265722b83",
        "type": "switch",
        "z": "dccf530a3e633ba1",
        "name": "",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "nempty"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 730,
        "y": 1500,
        "wires": [
            [
                "effbdaf6295ce905"
            ]
        ]
    },
    {
        "id": "effbdaf6295ce905",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "dailyHistoricals",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 970,
        "y": 1500,
        "wires": []
    },
    {
        "id": "fe44a70415d0b9d1",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 39",
        "func": "var predictions = msg.payload[0].slice(1, 5);\nvar list = []\nlist.push({\n    \"title\": \"<b>Predicted outside temperature for +00:30</b>\", \n    \"description\": \"Temperature: \"+ predictions[0] +\" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/7/7b/Temp_ColdSR.png\" \n});\nlist.push({\n    \"title\": \"<b>Predicted outside temperature for +01:00</b>\",\n    \"description\": \"Temperature: \" + predictions[1] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/7/7b/Temp_ColdSR.png\"\n});\nlist.push({\n    \"title\": \"<b>Predicted outside temperature for +01:30</b>\",\n    \"description\": \"Temperature: \" + predictions[2] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/7/7b/Temp_ColdSR.png\"\n});\nlist.push({\n    \"title\": \"<b>Predicted outside temperature for +02:00</b>\",\n    \"description\": \"Temperature: \" + predictions[3] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/7/7b/Temp_ColdSR.png\"\n});\nmsg.payload = list\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 1820,
        "wires": [
            [
                "235f4d86fdacb8ea"
            ]
        ]
    },
    {
        "id": "235f4d86fdacb8ea",
        "type": "ui_list",
        "z": "dccf530a3e633ba1",
        "group": "1e15e58adbf0f158",
        "name": "outside",
        "order": 4,
        "width": "8",
        "height": "6",
        "lineType": "three",
        "actionType": "none",
        "allowHTML": true,
        "outputs": 0,
        "topic": "",
        "x": 1400,
        "y": 1820,
        "wires": []
    },
    {
        "id": "08c138e8caced8e8",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 41",
        "func": "var predictions = msg.payload[1].slice(1, 5);\nvar list = []\nlist.push({\n    \"title\": \"<b>Predicted inside temperature for +00:30</b>\", \n    \"description\": \"Temperature: \"+ predictions[0] +\" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/7/7b/Temp_ColdSR.png\" \n});\nlist.push({\n    \"title\": \"<b>Predicted inside temperature for +01:00</b>\",\n    \"description\": \"Temperature: \" + predictions[1] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/7/7b/Temp_ColdSR.png\"\n});\nlist.push({\n    \"title\": \"<b>Predicted inside temperature for +01:30</b>\",\n    \"description\": \"Temperature: \" + predictions[2] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/7/7b/Temp_ColdSR.png\"\n});\nlist.push({\n    \"title\": \"<b>Predicted inside temperature for +02:00</b>\",\n    \"description\": \"Temperature: \" + predictions[3] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/7/7b/Temp_ColdSR.png\"\n});\nmsg.payload = list\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1230,
        "y": 1900,
        "wires": [
            [
                "7a2af853a06fb226"
            ]
        ]
    },
    {
        "id": "f47417d520125f44",
        "type": "join",
        "z": "dccf530a3e633ba1",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "",
        "propertyType": "full",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 1170,
        "y": 2000,
        "wires": [
            [
                "6dd5d25c367cf4b9"
            ]
        ]
    },
    {
        "id": "1fb9d406c2e28997",
        "type": "join",
        "z": "dccf530a3e633ba1",
        "name": "",
        "mode": "custom",
        "build": "array",
        "property": "",
        "propertyType": "full",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "2",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 1170,
        "y": 2060,
        "wires": [
            [
                "c917674fcecac669"
            ]
        ]
    },
    {
        "id": "6dd5d25c367cf4b9",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 42",
        "func": "if(msg.payload[0].payload.length == 3){\n    var currentHour = msg.payload[1].payload;\n    var currentTemperature = msg.payload[1].value;\n    //outside predicted (for inside, change second-to-last zero to 1)\n    var predictedTemperature = msg.payload[0].payload[0][0];\n    var difference = Math.abs(currentTemperature - predictedTemperature);\n    msg.payload = [currentHour, currentTemperature, predictedTemperature, parseFloat(parseFloat(difference).toFixed(3))];\n    return msg;\n} else {\n    var currentHour = msg.payload[0].payload;\n    var currentTemperature = msg.payload[0].value;\n    //outside predicted (for inside, change second-to-last zero to 1)\n    var predictedTemperature = msg.payload[1].payload[0][0];\n    var difference = Math.abs(currentTemperature - predictedTemperature);\n    msg.payload = [currentHour, currentTemperature, predictedTemperature, parseFloat(parseFloat(difference).toFixed(3))];\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1350,
        "y": 2000,
        "wires": [
            [
                "14d82ee414426ef0"
            ]
        ]
    },
    {
        "id": "c3783c80c408e1b5",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "1e15e58adbf0f158",
        "order": 3,
        "width": "8",
        "height": "6",
        "label": "Outside Temperature VS Outside Predicted",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "30",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffcc",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#ff0000",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1850,
        "y": 2000,
        "wires": [
            []
        ]
    },
    {
        "id": "14d82ee414426ef0",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "chartData",
        "func": "\nvar dif = \"Difference: \" + msg.payload[3]; \n\nmsg.payload = [{\n    \"series\": [\"REAL (\" + msg.payload[1] + \" ºC)\", \"PREDICTED (\" + msg.payload[2] + \" ºC)\"], \"data\": [[msg.payload[1]], [msg.payload[2]]], \"labels\": [dif] }]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1560,
        "y": 2000,
        "wires": [
            [
                "c3783c80c408e1b5"
            ]
        ]
    },
    {
        "id": "eecffaf0fce0630f",
        "type": "ui_template",
        "z": "dccf530a3e633ba1",
        "group": "9cb4bc4d.96552",
        "name": "Clock & Stylesheet",
        "order": 10,
        "width": "0",
        "height": "0",
        "format": "<style>\n    /*\nIt is reasnoble to declare the colors as CSS variables\nso they can be easily called by name where needed.\n\nYou can see that in many places the variables are not used. Change it!\n*/\n\n    :root {\n        --color-green-primary: rgb(51, 204, 51);\n        --color-green-secondary: rgb(26, 101, 26);\n        --color-red-primary: rgb(255, 0, 0);\n        --color-red-secondary: rgba(153, 0, 0, 1);\n        --color-gray-primary: rgba(40, 40, 40, 1);\n        --color-gray-secondary: rgba(65, 65, 65, 1);\n        --color-text-primary: rgb(128, 128, 128);\n        --color-widget-border: rgb(84, 78, 78);\n    }\n\n\n    /*\nAll CSS adjustments are commented out.\nTurn rules on one by one and see the changes.\nDon't use too many elements cos it wil be confusing\nStart with simple elements like text, slider or button\n\nMany of elements like buttons have states, \nthose rules must be found and adjusted also.\n*/\n\n\n    .masonry-container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        margin: 0 auto;\n    }\n\n\n    .nr-dashboard-theme ui-card-panel {\n        box-shadow: inset 0px 1px 4px 0px #000000bb;\n        border-radius: 15px;\n    }\n\n\n    body.nr-dashboard-theme md-content md-card {\n        //box-shadow: inset 0px 1px 4px 0px #000000bb;\n        //border-radius: 15px;\n\n    }\n\n    .md-button {\n        display: inline-block;\n        position: relative;\n        cursor: pointer;\n        min-height: 36px;\n        min-width: 88px;\n        line-height: 36px;\n        vertical-align: middle;\n        align-items: center;\n        text-align: center;\n        border-radius: 12px;\n        box-sizing: border-box;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        outline: none;\n        border: 0;\n        padding: 0 6px;\n        margin: 6px 8px;\n        background: transparent;\n        color: var(--color-text-primary);\n        white-space: nowrap;\n        text-transform: uppercase;\n        font-weight: 500;\n        font-size: 14px;\n        font-style: inherit;\n        font-variant: inherit;\n        font-family: inherit;\n        text-decoration: none;\n        overflow: hidden;\n        transition: box-shadow .4s cubic-bezier(.25, .8, .25, 1), background-color .4s cubic-bezier(.25, .8, .25, 1);\n    }\n\n    md-slider .md-thumb {\n        z-index: 1;\n        position: absolute;\n        left: -10px;\n        top: 14px;\n        width: 20px;\n        height: 20px;\n        border-radius: 20px;\n        -webkit-transform: scale(.7);\n        transform: scale(.7);\n        transition: all .4s cubic-bezier(.25, .8, .25, 1);\n        box-shadow: 0 0 6px #00000070;\n    }\n \n\n</style>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": false,
        "templateScope": "global",
        "className": "",
        "x": 1550,
        "y": 2500,
        "wires": [
            []
        ]
    },
    {
        "id": "bf0b96e5d6a83869",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Style.css",
        "info": "",
        "x": 1560,
        "y": 2460,
        "wires": []
    },
    {
        "id": "c917674fcecac669",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 43",
        "func": "if (msg.payload[0].payload.length == 3) {\n    var currentHour = msg.payload[1].payload;\n    var currentTemperature = msg.payload[1].value;\n    //outside predicted (for inside, change second-to-last zero to 1)\n    var predictedTemperature = msg.payload[0].payload[1][0];\n    var difference = Math.abs(currentTemperature - predictedTemperature);\n    msg.payload = [currentHour, currentTemperature, predictedTemperature, parseFloat(parseFloat(difference).toFixed(3))];\n    return msg;\n} else {\n    var currentHour = msg.payload[0].payload;\n    var currentTemperature = msg.payload[0].value;\n    //outside predicted (for inside, change second-to-last zero to 1)\n    var predictedTemperature = msg.payload[1].payload[1][0];\n    var difference = Math.abs(currentTemperature - predictedTemperature);\n    msg.payload = [currentHour, currentTemperature, predictedTemperature, parseFloat(parseFloat(difference).toFixed(3))];\n    return msg;\n}\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1350,
        "y": 2060,
        "wires": [
            [
                "23be3d3b26b772de"
            ]
        ]
    },
    {
        "id": "17755e5a46afdd75",
        "type": "ui_chart",
        "z": "dccf530a3e633ba1",
        "name": "",
        "group": "0ae6d5e875f99e45",
        "order": 7,
        "width": "8",
        "height": "6",
        "label": "Inside Temperature VS Inside Predicted",
        "chartType": "bar",
        "legend": "true",
        "xformat": "HH:mm:ss",
        "interpolate": "linear",
        "nodata": "",
        "dot": false,
        "ymin": "0",
        "ymax": "30",
        "removeOlder": 1,
        "removeOlderPoints": "",
        "removeOlderUnit": "3600",
        "cutout": 0,
        "useOneColor": false,
        "useUTC": false,
        "colors": [
            "#00ffcc",
            "#ff0000",
            "#ff7f0e",
            "#2ca02c",
            "#98df8a",
            "#ff0000",
            "#ff9896",
            "#9467bd",
            "#c5b0d5"
        ],
        "outputs": 1,
        "useDifferentColor": false,
        "className": "",
        "x": 1840,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "23be3d3b26b772de",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "chartData",
        "func": "\nvar dif = \"Difference: \" + msg.payload[3]; \n\nmsg.payload = [{\n    \"series\": [\"REAL (\" + msg.payload[1] + \" ºC)\", \"PREDICTED (\" + msg.payload[2] + \" ºC)\"], \"data\": [[msg.payload[1]], [msg.payload[2]]], \"labels\": [dif] }]\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1560,
        "y": 2060,
        "wires": [
            [
                "17755e5a46afdd75"
            ]
        ]
    },
    {
        "id": "7a2af853a06fb226",
        "type": "ui_list",
        "z": "dccf530a3e633ba1",
        "group": "0ae6d5e875f99e45",
        "name": "inside",
        "order": 8,
        "width": "8",
        "height": "6",
        "lineType": "three",
        "actionType": "none",
        "allowHTML": true,
        "outputs": 0,
        "topic": "",
        "x": 1390,
        "y": 1900,
        "wires": []
    },
    {
        "id": "3c38e64c45ee83b8",
        "type": "ui_list",
        "z": "dccf530a3e633ba1",
        "group": "ae02fd3971e81b07",
        "name": "thermals",
        "order": 10,
        "width": "8",
        "height": "6",
        "lineType": "three",
        "actionType": "none",
        "allowHTML": true,
        "outputs": 0,
        "topic": "",
        "x": 1020,
        "y": 2280,
        "wires": []
    },
    {
        "id": "557499f2e65e640b",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 44",
        "func": "var predictions = msg.payload[1].slice(1, 5);\nvar list = []\nlist.push({\n    \"title\": \"<b>Predicted thermal confort for +00:30</b>\", \n    \"description\": \"Temperature: \"+ predictions[0] +\" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Home-svg-icon.svg/640px-Home-svg-icon.svg.png\" \n});\nlist.push({\n    \"title\": \"<b>Predicted thermal confort for +01:00</b>\",\n    \"description\": \"Temperature: \" + predictions[1] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Home-svg-icon.svg/640px-Home-svg-icon.svg.png\"\n});\nlist.push({\n    \"title\": \"<b>Predicted thermal confort for +01:30</b>\",\n    \"description\": \"Temperature: \" + predictions[2] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Home-svg-icon.svg/640px-Home-svg-icon.svg.png\"\n});\nlist.push({\n    \"title\": \"<b>Predicted thermal confort for +02:00</b>\",\n    \"description\": \"Temperature: \" + predictions[3] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/3d/Home-svg-icon.svg/640px-Home-svg-icon.svg.png\"\n});\nmsg.payload = list\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 810,
        "y": 2280,
        "wires": [
            [
                "3c38e64c45ee83b8"
            ]
        ]
    },
    {
        "id": "6dd01f18277a4674",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "function 45",
        "func": "var predictions = msg.payload[1].slice(1, 5);\nvar list = []\nlist.push({\n    \"title\": \"<b>Predicted inside deviation for +00:30</b>\", \n    \"description\": \"Temperature: \"+ predictions[0] +\" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/b/be/Mathematics_Collaboration_of_the_Week_icon.png\" \n});\nlist.push({\n    \"title\": \"<b>Predicted inside deviation for +01:00</b>\",\n    \"description\": \"Temperature: \" + predictions[1] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/b/be/Mathematics_Collaboration_of_the_Week_icon.png\"\n});\nlist.push({\n    \"title\": \"<b>Predicted inside deviation for +01:30</b>\",\n    \"description\": \"Temperature: \" + predictions[2] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/b/be/Mathematics_Collaboration_of_the_Week_icon.png\"\n});\nlist.push({\n    \"title\": \"<b>Predicted inside deviation for +02:00</b>\",\n    \"description\": \"Temperature: \" + predictions[3] + \" ºC\",\n    \"icon\": \"https://upload.wikimedia.org/wikipedia/commons/b/be/Mathematics_Collaboration_of_the_Week_icon.png\"\n});\nmsg.payload = list\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 2400,
        "wires": [
            [
                "794de010abaa1286"
            ]
        ]
    },
    {
        "id": "794de010abaa1286",
        "type": "ui_list",
        "z": "dccf530a3e633ba1",
        "group": "ae02fd3971e81b07",
        "name": "deviations",
        "order": 12,
        "width": "8",
        "height": "6",
        "lineType": "three",
        "actionType": "none",
        "allowHTML": true,
        "outputs": 0,
        "topic": "",
        "x": 1020,
        "y": 2400,
        "wires": []
    },
    {
        "id": "532343bdd89aef9f",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Show charts to compare real with prediction data",
        "info": "",
        "x": 1400,
        "y": 1960,
        "wires": []
    },
    {
        "id": "70765a6573b8bf8c",
        "type": "function",
        "z": "dccf530a3e633ba1",
        "name": "addToDB",
        "func": "var dayX = msg.payload.date.split(\" \")[0];\nvar hourX = msg.payload.date.split(\" \")[1];\nvar labelX = msg.payload.label;\nvar tempX = parseFloat(parseFloat(msg.payload.temperature).toFixed(3));\n\nmsg.payload = {day: dayX, hour: hourX, label: labelX, temp: tempX};\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 1560,
        "wires": [
            [
                "797f9b62c3944fcf"
            ]
        ]
    },
    {
        "id": "797f9b62c3944fcf",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "allHistoricals",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "insert",
        "x": 680,
        "y": 1560,
        "wires": []
    },
    {
        "id": "ab4ce4d13c230e1d",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "RemoveOnline",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"day\": \"2020-12-01\"}",
        "payloadType": "json",
        "x": 1100,
        "y": 340,
        "wires": [
            [
                "f0a913d5b2b07c66"
            ]
        ]
    },
    {
        "id": "f0a913d5b2b07c66",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "dailyHistoricals",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 1370,
        "y": 340,
        "wires": []
    },
    {
        "id": "08c8631cef7bd3df",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "RemoveOnline",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"day\": \"2020-12-01\"}",
        "payloadType": "json",
        "x": 1100,
        "y": 300,
        "wires": [
            [
                "632f38d15c81cfbd"
            ]
        ]
    },
    {
        "id": "632f38d15c81cfbd",
        "type": "mongodb out",
        "z": "dccf530a3e633ba1",
        "mongodb": "698208a63e545d7e",
        "name": "",
        "collection": "allHistoricals",
        "payonly": true,
        "upsert": false,
        "multi": false,
        "operation": "delete",
        "x": 1360,
        "y": 300,
        "wires": []
    },
    {
        "id": "27729faaf062fb67",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Get Thermals for display",
        "info": "",
        "x": 350,
        "y": 2180,
        "wires": []
    },
    {
        "id": "b3b604ffe166c853",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Get Predicted weekly averages",
        "info": "",
        "x": 870,
        "y": 2020,
        "wires": []
    },
    {
        "id": "562e05a7bc1104c1",
        "type": "comment",
        "z": "dccf530a3e633ba1",
        "name": "Calculate deviations for display",
        "info": "",
        "x": 590,
        "y": 2300,
        "wires": []
    },
    {
        "id": "3e1136d9ddb10a55",
        "type": "inject",
        "z": "dccf530a3e633ba1",
        "name": "",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": "1",
        "topic": "",
        "payload": "false",
        "payloadType": "bool",
        "x": 1290,
        "y": 2220,
        "wires": [
            [
                "3d6e818dd57a8c1f"
            ]
        ]
    },
    {
        "id": "a593b12c1e7f0916",
        "type": "ui_group",
        "name": "Select Days",
        "tab": "1b3396bf2989f76c",
        "order": 2,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "698208a63e545d7e",
        "type": "mongodb",
        "hostname": "mongodbiot.7dmyqqp.mongodb.net",
        "topology": "dnscluster",
        "connectOptions": "",
        "port": "27017",
        "db": "MongoDBIoT",
        "name": "MongoDBAtlas"
    },
    {
        "id": "08e609891c1a1366",
        "type": "ui_group",
        "name": "Selected Days Statistics",
        "tab": "1b3396bf2989f76c",
        "order": 3,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "7eef2f7af84f78ef",
        "type": "ui_group",
        "name": "Select Months",
        "tab": "1b3396bf2989f76c",
        "order": 8,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "bf67b063036945e3",
        "type": "ui_group",
        "name": "Selected Months Statistics",
        "tab": "1b3396bf2989f76c",
        "order": 9,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ca147ada51e70baa",
        "type": "ui_group",
        "name": "Show Total Statistics",
        "tab": "1b3396bf2989f76c",
        "order": 12,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "5bb2b4f1e0bcf54e",
        "type": "ui_group",
        "name": "Daily Temperature Charts",
        "tab": "1b3396bf2989f76c",
        "order": 6,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "5390208bf3e2cf88",
        "type": "ui_group",
        "name": "Daily Temperature Variation Graphs",
        "tab": "1b3396bf2989f76c",
        "order": 7,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "7cb1f3a26f39af7c",
        "type": "ui_group",
        "name": "Monthly Temperature Charts",
        "tab": "1b3396bf2989f76c",
        "order": 10,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "4372ebcc482c975e",
        "type": "ui_group",
        "name": "Monthly Temperature Variation Graphs",
        "tab": "1b3396bf2989f76c",
        "order": 11,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "273be3987efa31af",
        "type": "mqtt-broker",
        "name": "",
        "broker": "34.175.205.14",
        "port": "1883",
        "clientid": "",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "userProps": "",
        "sessionExpiry": ""
    },
    {
        "id": "9f7d723fbcbca6b1",
        "type": "ui_group",
        "name": "Live Data",
        "tab": "c9f7b96fefcab6ed",
        "order": 1,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "187fd0431166b767",
        "type": "ui_group",
        "name": "Tabs",
        "tab": "1b3396bf2989f76c",
        "order": 1,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "1e15e58adbf0f158",
        "type": "ui_group",
        "name": "Outside Prediction Details",
        "tab": "c9f7b96fefcab6ed",
        "order": 3,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "0ae6d5e875f99e45",
        "type": "ui_group",
        "name": "Inside Prediction Details",
        "tab": "c9f7b96fefcab6ed",
        "order": 2,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "520b7a25bf081dbf",
        "type": "ui_group",
        "name": "Total Month Graph",
        "tab": "1b3396bf2989f76c",
        "order": 11,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "ae02fd3971e81b07",
        "type": "ui_group",
        "name": "Thermal and Deviations Details",
        "tab": "c9f7b96fefcab6ed",
        "order": 4,
        "disp": true,
        "width": "32",
        "collapse": false,
        "className": ""
    },
    {
        "id": "9cb4bc4d.96552",
        "type": "ui_group",
        "name": "RPi System Specs",
        "tab": "ad4a1223.94ae8",
        "order": 1,
        "disp": true,
        "width": "20",
        "collapse": false
    },
    {
        "id": "1b3396bf2989f76c",
        "type": "ui_tab",
        "name": "Historical",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "c9f7b96fefcab6ed",
        "type": "ui_tab",
        "name": "Live",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "ad4a1223.94ae8",
        "type": "ui_tab",
        "z": "dccf530a3e633ba1",
        "name": "RPi System Specs",
        "icon": "computer",
        "order": 1,
        "disabled": false,
        "hidden": false
    }
]